/*! For license information please see main.7c80f030.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://oilseal-manager-3.preview.emergentagent.com","/api"),zt=(0,a.createContext)(),At=()=>{const e=(0,a.useContext)(zt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Dt=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(!0);(0,a.useEffect)((()=>{const e=localStorage.getItem("user");e&&r(JSON.parse(e)),o(!1)}),[]);return l?(0,Lt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Lt.jsx)("div",{className:"text-xl",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})}):(0,Lt.jsx)(zt.Provider,{value:{user:n,login:async(e,t)=>{try{const n=await Rt.post("".concat(Ft,"/auth/login"),null,{params:{username:e,password:t}});return!!n.data.success&&(r(n.data.user),localStorage.setItem("user",JSON.stringify(n.data.user)),!0)}catch(n){return console.error("Login error:",n),!1}},logout:()=>{r(null),localStorage.removeItem("user")}},children:t})},Mt=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),{login:s}=At();return(0,Lt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4",dir:"rtl",children:(0,Lt.jsxs)("div",{className:"max-w-md w-full",children:[(0,Lt.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-blue-100",children:[(0,Lt.jsxs)("div",{className:"text-center mb-8",children:[(0,Lt.jsx)("div",{className:"mb-4",children:(0,Lt.jsx)("img",{src:"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg",alt:"Master Seal Logo",className:"h-16 w-16 mx-auto rounded-full shadow-lg border-4 border-blue-100"})}),(0,Lt.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"\u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644"}),(0,Lt.jsx)("p",{className:"text-gray-500 mt-2",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0645\u062a\u0643\u0627\u0645\u0644"}),(0,Lt.jsx)("div",{className:"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-600 mx-auto mt-3 rounded-full"})]}),(0,Lt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o("");await s(e,n)||o("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0623\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631")},className:"space-y-6",children:[(0,Lt.jsxs)("div",{className:"space-y-2",children:[(0,Lt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\ud83d\udc64 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Lt.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0})]}),(0,Lt.jsxs)("div",{className:"space-y-2",children:[(0,Lt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\ud83d\udd12 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,Lt.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"\u0627\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0})]}),l&&(0,Lt.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm text-center animate-pulse",children:["\u26a0\ufe0f ",l]}),(0,Lt.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-3 focus:ring-blue-300 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:"\ud83d\ude80 \u062f\u062e\u0648\u0644"})]}),(0,Lt.jsxs)("div",{className:"text-center mt-8 pt-6 border-t border-gray-100",children:[(0,Lt.jsx)("p",{className:"text-xs text-gray-400",children:"\u0627\u0644\u062d\u0631\u0641\u064a\u064a\u0646 - \u0627\u0644\u0633\u0644\u0627\u0645 - \u0623\u0645\u0627\u0645 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a"}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:"\ud83d\udcde 01020630677"})]})]}),(0,Lt.jsx)("div",{className:"mt-6 bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-blue-100/50",children:(0,Lt.jsx)("p",{className:"text-sm text-gray-600",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0645\u062a\u0643\u0627\u0645\u0644 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0648\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"})})]})})},Ut=e=>{let{currentPage:t,onPageChange:n}=e;const{user:r,logout:a}=At(),l="Elsawy"===(null===r||void 0===r?void 0:r.username)?[{key:"dashboard",label:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:"\ud83d\udcca"},{key:"sales",label:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:"\ud83d\udcb0"},{key:"inventory",label:"\u0627\u0644\u062c\u0631\u062f",icon:"\ud83d\udce6"},{key:"stock",label:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:"\ud83c\udfea"},{key:"local",label:"\u0645\u062d\u0644\u064a",icon:"\ud83c\udfed"},{key:"deferred",label:"\u0627\u0644\u0622\u062c\u0644",icon:"\u23f3"},{key:"expenses",label:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",icon:"\ud83d\udcb8"},{key:"revenue",label:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a",icon:"\ud83d\udcc8"},{key:"treasury",label:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:"\ud83c\udfe6"},{key:"invoices",label:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:"\ud83e\uddfe"},{key:"work-orders",label:"\u0623\u0645\u0631 \u0634\u063a\u0644",icon:"\u2699\ufe0f"},{key:"users",label:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",icon:"\ud83d\udc65"}]:"admin"===(null===r||void 0===r?void 0:r.role)?[{key:"sales",label:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:"\ud83d\udcb0"},{key:"inventory",label:"\u0627\u0644\u062c\u0631\u062f",icon:"\ud83d\udce6"},{key:"stock",label:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:"\ud83c\udfea"},{key:"local",label:"\u0645\u062d\u0644\u064a",icon:"\ud83c\udfed"},{key:"deferred",label:"\u0627\u0644\u0622\u062c\u0644",icon:"\u23f3"},{key:"expenses",label:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",icon:"\ud83d\udcb8"},{key:"revenue",label:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a",icon:"\ud83d\udcc8"},{key:"treasury",label:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:"\ud83c\udfe6"},{key:"invoices",label:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:"\ud83e\uddfe"},{key:"work-orders",label:"\u0623\u0645\u0631 \u0634\u063a\u0644",icon:"\u2699\ufe0f"},{key:"users",label:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",icon:"\ud83d\udc65"}]:[{key:"sales",label:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:"\ud83d\udcb0"},{key:"inventory",label:"\u0627\u0644\u062c\u0631\u062f",icon:"\ud83d\udce6"},{key:"stock",label:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:"\ud83c\udfea"},{key:"local",label:"\u0645\u062d\u0644\u064a",icon:"\ud83c\udfed"},{key:"deferred",label:"\u0627\u0644\u0622\u062c\u0644",icon:"\u23f3"},{key:"expenses",label:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",icon:"\ud83d\udcb8"},{key:"treasury",label:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:"\ud83c\udfe6"},{key:"invoices",label:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:"\ud83e\uddfe"},{key:"work-orders",label:"\u0623\u0645\u0631 \u0634\u063a\u0644",icon:"\u2699\ufe0f"}];return(0,Lt.jsxs)("div",{className:"w-80 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl",children:[(0,Lt.jsx)("div",{className:"p-6 border-b border-blue-700",children:(0,Lt.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,Lt.jsx)("img",{src:"https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg",alt:"Master Seal Logo",className:"h-12 w-12 rounded-lg shadow-lg"}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h1",{className:"text-xl font-bold text-white",children:"\u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644"}),(0,Lt.jsx)("p",{className:"text-xs text-blue-200",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0645\u062a\u0643\u0627\u0645\u0644"})]})]})}),(0,Lt.jsx)("div",{className:"p-4 bg-blue-800 border-b border-blue-700",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("p",{className:"text-sm font-medium",children:"\u0623\u0647\u0644\u0627\u064b \u0648\u0633\u0647\u0644\u0627\u064b"}),(0,Lt.jsx)("p",{className:"text-lg font-bold text-blue-200",children:null===r||void 0===r?void 0:r.username})]}),(0,Lt.jsx)("button",{onClick:a,className:"bg-red-500 hover:bg-red-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"\u062e\u0631\u0648\u062c"})]})}),(0,Lt.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:l.map((e=>(0,Lt.jsxs)("button",{onClick:()=>n(e.key),className:"w-full flex items-center space-x-3 space-x-reverse p-4 rounded-xl text-right transition-all duration-200 group ".concat(t===e.key?"bg-white text-blue-900 shadow-lg transform scale-105":"hover:bg-blue-700 hover:transform hover:translate-x-2"),children:[(0,Lt.jsx)("span",{className:"text-2xl",children:e.icon}),(0,Lt.jsx)("span",{className:"font-medium",children:e.label}),t===e.key&&(0,Lt.jsx)("div",{className:"mr-auto",children:(0,Lt.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})})]},e.key)))}),(0,Lt.jsxs)("div",{className:"p-4 border-t border-blue-700 text-center",children:[(0,Lt.jsx)("p",{className:"text-xs text-blue-300",children:"\u0627\u0644\u062d\u0631\u0641\u064a\u064a\u0646 - \u0627\u0644\u0633\u0644\u0627\u0645 - \u0623\u0645\u0627\u0645 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a"}),(0,Lt.jsx)("p",{className:"text-xs text-blue-400 mt-1",children:"01020630677"})]})]})},It=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[s,i]=(0,a.useState)("items"),[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)({material_type:"NBR",inner_diameter:"",outer_diameter:"",available_pieces:"",min_stock_level:2,notes:""}),[f,h]=(0,a.useState)({material_type:"NBR",inner_diameter:"",outer_diameter:"",transaction_type:"in",pieces_change:"",reason:"",notes:""}),[b,g]=(0,a.useState)(""),x=["NBR","BUR","BT","VT","BOOM"],y=async()=>{try{const e=await Rt.get("".concat(Ft,"/inventory"));t(e.data||[])}catch(e){console.error("Error fetching inventory items:",e)}},v=async()=>{try{const e=await Rt.get("".concat(Ft,"/inventory-transactions"));r(e.data||[])}catch(e){console.error("Error fetching inventory transactions:",e)}},w=async()=>{try{const e=await Rt.get("".concat(Ft,"/inventory/low-stock"));o(e.data||[])}catch(e){console.error("Error fetching low stock items:",e)}};(0,a.useEffect)((()=>{y(),v(),w()}),[]);const j=e.filter((e=>{var t;return e.material_type.toLowerCase().includes(b.toLowerCase())||e.inner_diameter.toString().includes(b.toLowerCase())||e.outer_diameter.toString().includes(b.toLowerCase())||(null===(t=e.notes)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))})).sort(((e,t)=>{const n={BUR:1,NBR:2,BT:3,BOOM:4,VT:5},r=n[e.material_type]||6,a=n[t.material_type]||6;return r!==a?r-a:e.inner_diameter!==t.inner_diameter?e.inner_diameter-t.inner_diameter:e.outer_diameter-t.outer_diameter})),N=n.filter((e=>{var t;return e.reason.toLowerCase().includes(b.toLowerCase())||e.material_type.toLowerCase().includes(b.toLowerCase())||(null===(t=e.notes)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))})).sort(((e,t)=>{const n={BUR:1,NBR:2,BT:3,BOOM:4,VT:5},r=n[e.material_type]||6,a=n[t.material_type]||6;return r!==a?r-a:e.inner_diameter!==t.inner_diameter?e.inner_diameter-t.inner_diameter:e.outer_diameter!==t.outer_diameter?e.outer_diameter-t.outer_diameter:new Date(t.date)-new Date(e.date)}));return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Lt.jsx)("h1",{className:"text-3xl font-bold",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>i("items"),className:"px-4 py-2 rounded ".concat("items"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsx)("button",{onClick:()=>i("transactions"),className:"px-4 py-2 rounded ".concat("transactions"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsxs)("button",{onClick:()=>i("low-stock"),className:"px-4 py-2 rounded ".concat("low-stock"===s?"bg-red-500 text-white":"bg-gray-200"),children:["\u0645\u062e\u0632\u0648\u0646 \u0645\u0646\u062e\u0641\u0636 (",l.length,")"]}),(0,Lt.jsx)("button",{onClick:()=>i("excel"),className:"px-4 py-2 rounded ".concat("excel"===s?"bg-green-500 text-white":"bg-gray-200"),children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u0643\u0633\u0644"}),(0,Lt.jsx)("button",{onClick:()=>i("add-item"),className:"px-4 py-2 rounded ".concat("add-item"===s?"bg-green-500 text-white":"bg-gray-200"),children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 \u062c\u062f\u064a\u062f"})]})]}),(0,Lt.jsx)("div",{className:"mb-4",children:(0,Lt.jsx)("input",{type:"text",value:b,onChange:e=>g(e.target.value),placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u062c\u0631\u062f...",className:"w-full p-3 border border-gray-300 rounded-lg"})}),"items"===s&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0627\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639 \u0627\u0644\u0645\u062a\u0627\u062d\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:j.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 font-semibold",children:e.material_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.inner_diameter}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.outer_diameter}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold ".concat(e.available_pieces<=e.min_stock_level?"text-red-600":"text-green-600"),children:[e.available_pieces," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.min_stock_level," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat(e.available_pieces<=e.min_stock_level?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.available_pieces<=e.min_stock_level?"\u0645\u0646\u062e\u0641\u0636":"\u0637\u0628\u064a\u0639\u064a"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.notes||"-"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>{u(e),m({material_type:e.material_type,inner_diameter:e.inner_diameter,outer_diameter:e.outer_diameter,available_pieces:e.available_pieces,min_stock_level:e.min_stock_level,notes:e.notes||""}),i("add-item")},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0639\u0646\u0635\u0631\u061f"))try{await Rt.delete("".concat(Ft,"/inventory/").concat(e.id)),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062c\u0627\u062d"),y()}catch(t){console.error("Error deleting item:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631")}},className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"})]})})]},e.id)))})]})})]}),"transactions"===s&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0629 \u062c\u0631\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Lt.jsx)("select",{value:f.material_type,onChange:e=>h(d(d({},f),{},{material_type:e.target.value})),className:"p-2 border border-gray-300 rounded",children:x.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))}),(0,Lt.jsx)("input",{type:"number",value:f.inner_diameter,onChange:e=>h(d(d({},f),{},{inner_diameter:e.target.value})),placeholder:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"number",value:f.outer_diameter,onChange:e=>h(d(d({},f),{},{outer_diameter:e.target.value})),placeholder:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsxs)("select",{value:f.transaction_type,onChange:e=>h(d(d({},f),{},{transaction_type:e.target.value})),className:"p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"in",children:"\u0625\u0636\u0627\u0641\u0629 \u0644\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Lt.jsx)("option",{value:"out",children:"\u062e\u0635\u0645 \u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"})]}),(0,Lt.jsx)("input",{type:"number",step:"1",value:f.pieces_change,onChange:e=>h(d(d({},f),{},{pieces_change:e.target.value})),placeholder:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"text",value:f.reason,onChange:e=>h(d(d({},f),{},{reason:e.target.value})),placeholder:"\u0633\u0628\u0628 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629",className:"p-2 border border-gray-300 rounded"})]}),(0,Lt.jsx)("div",{className:"mt-4",children:(0,Lt.jsx)("input",{type:"text",value:f.notes,onChange:e=>h(d(d({},f),{},{notes:e.target.value})),placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"w-full p-2 border border-gray-300 rounded"})}),(0,Lt.jsx)("button",{onClick:async()=>{if(f.material_type&&f.inner_diameter&&f.outer_diameter&&f.pieces_change&&f.reason)try{const e=d(d({},f),{},{inner_diameter:parseFloat(f.inner_diameter),outer_diameter:parseFloat(f.outer_diameter),pieces_change:"out"===f.transaction_type?-Math.abs(parseInt(f.pieces_change)):Math.abs(parseInt(f.pieces_change))});await Rt.post("".concat(Ft,"/inventory-transactions"),e),y(),v(),w(),h({material_type:"NBR",inner_diameter:"",outer_diameter:"",transaction_type:"in",pieces_change:"",reason:"",notes:""}),alert("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0645\u0639\u0627\u0645\u0644\u0629 \u0627\u0644\u062c\u0631\u062f \u0628\u0646\u062c\u0627\u062d")}catch(n){var e,t;console.error("Error adding inventory transaction:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0645\u0639\u0627\u0645\u0644\u0629 \u0627\u0644\u062c\u0631\u062f: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0633\u062c\u0644 \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0627\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0642\u0627\u0633\u0627\u062a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0633\u0628\u0628"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:N.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.material_type}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.inner_diameter," \xd7 ",e.outer_diameter]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("in"===e.transaction_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"in"===e.transaction_type?"\u0625\u0636\u0627\u0641\u0629":"\u062e\u0635\u0645"})}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold ".concat(e.pieces_change>0?"text-green-600":"text-red-600"),children:[e.pieces_change>0?"+":"",e.pieces_change," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold",children:[e.remaining_pieces," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.reason}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.notes||"-"})]},e.id)))})]})})]})]}),"low-stock"===s&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:["\u0639\u0646\u0627\u0635\u0631 \u0628\u0645\u062e\u0632\u0648\u0646 \u0645\u0646\u062e\u0641\u0636 (",l.length,")"]}),0===l.length?(0,Lt.jsx)("p",{className:"text-green-600 text-center py-8",children:"\u2705 \u062c\u0645\u064a\u0639 \u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u062c\u0631\u062f \u0641\u064a \u0627\u0644\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u0637\u0628\u064a\u0639\u064a"}):(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-red-50",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0627\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0642\u0627\u0633\u0627\u062a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0642\u0635 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"})]})}),(0,Lt.jsx)("tbody",{children:l.map((e=>(0,Lt.jsxs)("tr",{className:"bg-red-50",children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 font-semibold",children:e.material_type}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.inner_diameter," \xd7 ",e.outer_diameter]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold text-red-600",children:[e.available_pieces," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.min_stock_level," \u0642\u0637\u0639\u0629"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold text-red-600",children:[Math.max(0,e.min_stock_level-e.available_pieces)," \u0642\u0637\u0639\u0629"]})]},e.id)))})]})})]}),"add-item"===s&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:c?"\u062a\u0639\u062f\u064a\u0644 \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 \u062c\u0631\u062f \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Lt.jsx)("select",{value:p.material_type,onChange:e=>m(d(d({},p),{},{material_type:e.target.value})),className:"p-2 border border-gray-300 rounded",children:x.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))}),(0,Lt.jsx)("input",{type:"number",value:p.inner_diameter,onChange:e=>m(d(d({},p),{},{inner_diameter:e.target.value})),placeholder:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"number",value:p.outer_diameter,onChange:e=>m(d(d({},p),{},{outer_diameter:e.target.value})),placeholder:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"number",step:"1",value:p.available_pieces,onChange:e=>m(d(d({},p),{},{available_pieces:e.target.value})),placeholder:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639 \u0627\u0644\u0645\u062a\u0627\u062d\u0629",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"number",value:p.min_stock_level,onChange:e=>m(d(d({},p),{},{min_stock_level:e.target.value})),placeholder:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0644\u0644\u0645\u062e\u0632\u0648\u0646",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"text",value:p.notes,onChange:e=>m(d(d({},p),{},{notes:e.target.value})),placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"p-2 border border-gray-300 rounded"})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(p.material_type&&p.inner_diameter&&p.outer_diameter&&p.available_pieces)try{c?(await Rt.put("".concat(Ft,"/inventory/").concat(c.id),d(d({},p),{},{inner_diameter:parseFloat(p.inner_diameter),outer_diameter:parseFloat(p.outer_diameter),available_pieces:parseInt(p.available_pieces),min_stock_level:parseInt(p.min_stock_level||2)})),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f \u0628\u0646\u062c\u0627\u062d"),u(null)):(await Rt.post("".concat(Ft,"/inventory"),d(d({},p),{},{inner_diameter:parseFloat(p.inner_diameter),outer_diameter:parseFloat(p.outer_diameter),available_pieces:parseInt(p.available_pieces),min_stock_level:parseInt(p.min_stock_level||2)})),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f \u0628\u0646\u062c\u0627\u062d")),y(),w(),i("items"),m({material_type:"NBR",inner_diameter:"",outer_diameter:"",available_pieces:"",min_stock_level:2,notes:""})}catch(n){var e,t;console.error("Error saving inventory item:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:c?"\u062a\u062d\u062f\u064a\u062b \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 \u0627\u0644\u062c\u0631\u062f"}),c&&(0,Lt.jsx)("button",{onClick:()=>{u(null),m({material_type:"NBR",inner_diameter:"",outer_diameter:"",available_pieces:"",min_stock_level:2,notes:""}),i("items")},className:"mt-4 mr-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u0639\u062f\u064a\u0644"})]}),"excel"===s&&(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0645\u0644\u0641\u0627\u062a \u0627\u0644\u062c\u0631\u062f - Excel"}),(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u062a\u0635\u062f\u064a\u0631 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsx)("button",{onClick:async()=>{try{const e=await Rt.get("".concat(Ft,"/excel/export/inventory"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","inventory_export_".concat((new Date).toISOString().split("T")[0],".xlsx")),document.body.appendChild(n),n.click(),n.remove(),alert("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0645\u0644\u0641 \u0627\u0644\u062c\u0631\u062f \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error exporting inventory:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0645\u0644\u0641")}},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062a\u0635\u062f\u064a\u0631 \u062c\u0631\u062f Excel"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062c\u0631\u062f"}),(0,Lt.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{const t=e.target.files[0];if(!t)return;const n=new FormData;n.append("file",t);try{const e=await Rt.post("".concat(Ft,"/excel/import/inventory"),n,{headers:{"Content-Type":"multipart/form-data"}});alert("\u062a\u0645 \u0627\u0633\u062a\u064a\u0631\u0627\u062f ".concat(e.data.imported_count," \u0639\u0646\u0635\u0631 \u0628\u0646\u062c\u0627\u062d")),e.data.errors.length>0&&console.warn("Import errors:",e.data.errors),y()}catch(r){console.error("Error importing inventory:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0645\u0644\u0641")}e.target.value=""},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"\u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629: material_type, inner_diameter, outer_diameter, available_pieces"})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 - Excel"}),(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645"}),(0,Lt.jsx)("button",{onClick:async()=>{try{const e=await Rt.get("".concat(Ft,"/excel/export/raw-materials"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","raw_materials_export_".concat((new Date).toISOString().split("T")[0],".xlsx")),document.body.appendChild(n),n.click(),n.remove(),alert("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0645\u0644\u0641 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error exporting raw materials:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0645\u0644\u0641")}},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062a\u0635\u062f\u064a\u0631 \u0645\u0648\u0627\u062f \u062e\u0627\u0645 Excel"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645"}),(0,Lt.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{const t=e.target.files[0];if(!t)return;const n=new FormData;n.append("file",t);try{const e=await Rt.post("".concat(Ft,"/excel/import/raw-materials"),n,{headers:{"Content-Type":"multipart/form-data"}});alert("\u062a\u0645 \u0627\u0633\u062a\u064a\u0631\u0627\u062f ".concat(e.data.imported_count," \u0645\u0627\u062f\u0629 \u062e\u0627\u0645 \u0628\u0646\u062c\u0627\u062d")),e.data.errors.length>0&&console.warn("Import errors:",e.data.errors)}catch(r){console.error("Error importing raw materials:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0645\u0644\u0641")}e.target.value=""},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"\u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629: material_type, inner_diameter, outer_diameter, height, pieces_count, unit_code, cost_per_mm"})]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg shadow-md md:col-span-2",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u062a\u0639\u0644\u064a\u0645\u0627\u062a \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0625\u0643\u0633\u0644"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a:"}),(0,Lt.jsxs)("ul",{className:"text-sm text-gray-700 list-disc list-inside space-y-1",children:[(0,Lt.jsx)("li",{children:"\u064a\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Lt.jsx)("li",{children:"\u0627\u0644\u0645\u0644\u0641 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u062a\u0646\u0633\u064a\u0642 \u062c\u0627\u0647\u0632 \u0644\u0644\u062a\u0639\u062f\u064a\u0644"}),(0,Lt.jsx)("li",{children:"\u064a\u0645\u0643\u0646 \u0641\u062a\u062d \u0627\u0644\u0645\u0644\u0641 \u0641\u064a Excel \u0623\u0648 Google Sheets"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a:"}),(0,Lt.jsxs)("ul",{className:"text-sm text-gray-700 list-disc list-inside space-y-1",children:[(0,Lt.jsx)("li",{children:"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0645\u0644\u0641 \u0645\u0646 \u0646\u0648\u0639 .xlsx \u0623\u0648 .xls"}),(0,Lt.jsx)("li",{children:"\u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0645\u0648\u062c\u0648\u062f\u0629"}),(0,Lt.jsx)("li",{children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u062c\u0648\u062f\u0629 \u0644\u0646 \u062a\u062a\u0623\u062b\u0631 (\u064a\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0623\u0648 \u0627\u0644\u0625\u0636\u0627\u0641\u0629)"}),(0,Lt.jsx)("li",{children:"\u0633\u064a\u062a\u0645 \u0639\u0631\u0636 \u0631\u0633\u0627\u0644\u0629 \u062a\u0623\u0643\u064a\u062f \u0645\u0639 \u0639\u062f\u062f \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u0633\u062a\u0648\u0631\u062f\u0629"})]})]})]})]})]})]})},Bt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[s,i]=(0,a.useState)("suppliers"),[c,u]=(0,a.useState)({name:"",phone:"",address:""}),[p,m]=(0,a.useState)({name:"",supplier_id:"",purchase_price:"",selling_price:"",current_stock:0}),[f,h]=(0,a.useState)({supplier_id:"",transaction_type:"purchase",amount:"",description:"",product_name:"",quantity:"",unit_price:"",payment_method:"cash"}),[b,g]=(0,a.useState)(""),[x,y]=(0,a.useState)(""),[v,w]=(0,a.useState)("cash"),j=async()=>{try{const e=await Rt.get("".concat(Ft,"/suppliers"));t(e.data||[])}catch(e){console.error("Error fetching suppliers:",e)}},N=async()=>{try{const e=await Rt.get("".concat(Ft,"/local-products"));r(e.data||[])}catch(e){console.error("Error fetching local products:",e)}},_=async()=>{try{const e=await Rt.get("".concat(Ft,"/supplier-transactions"));o(e.data||[])}catch(e){console.error("Error fetching supplier transactions:",e)}};(0,a.useEffect)((()=>{j(),N(),_()}),[]);return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Lt.jsx)("h1",{className:"text-3xl font-bold",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u0644\u064a\u0629"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>i("suppliers"),className:"px-4 py-2 rounded ".concat("suppliers"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Lt.jsx)("button",{onClick:()=>i("products"),className:"px-4 py-2 rounded ".concat("products"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Lt.jsx)("button",{onClick:()=>i("transactions"),className:"px-4 py-2 rounded ".concat("transactions"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"}),(0,Lt.jsx)("button",{onClick:()=>i("payments"),className:"px-4 py-2 rounded ".concat("payments"===s?"bg-blue-500 text-white":"bg-gray-200"),children:"\u0633\u062f\u0627\u062f \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"})]})]}),"suppliers"===s&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Lt.jsx)("input",{type:"text",value:c.name,onChange:e=>u(d(d({},c),{},{name:e.target.value})),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"text",value:c.phone,onChange:e=>u(d(d({},c),{},{phone:e.target.value})),placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"text",value:c.address,onChange:e=>u(d(d({},c),{},{address:e.target.value})),placeholder:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"p-2 border border-gray-300 rounded"})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(c.name.trim())try{await Rt.post("".concat(Ft,"/suppliers"),c),j(),u({name:"",phone:"",address:""}),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0631\u062f \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error adding supplier:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0631\u062f")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f")},className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0631\u062f"})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u0633\u062a\u062d\u0642"})]})}),(0,Lt.jsx)("tbody",{children:e.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 font-semibold",children:e.name}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.phone||"-"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.address||"-"}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",(e.total_purchases||0).toFixed(2)]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",(e.total_paid||0).toFixed(2)]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold ".concat((e.balance||0)>0?"text-red-600":"text-green-600"),children:["\u062c.\u0645 ",(e.balance||0).toFixed(2)]})]},e.id)))})]})})]})]}),"products"===s&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u0645\u062d\u0644\u064a \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Lt.jsx)("input",{type:"text",value:p.name,onChange:e=>m(d(d({},p),{},{name:e.target.value})),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsxs)("select",{value:p.supplier_id,onChange:e=>m(d(d({},p),{},{supplier_id:e.target.value})),className:"p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0631\u062f"}),e.map((e=>(0,Lt.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:p.purchase_price,onChange:e=>m(d(d({},p),{},{purchase_price:e.target.value})),placeholder:"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:p.selling_price,onChange:e=>m(d(d({},p),{},{selling_price:e.target.value})),placeholder:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639",className:"p-2 border border-gray-300 rounded"})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(p.name.trim()&&p.supplier_id&&p.purchase_price&&p.selling_price)try{await Rt.post("".concat(Ft,"/local-products"),d(d({},p),{},{purchase_price:parseFloat(p.purchase_price),selling_price:parseFloat(p.selling_price),current_stock:parseInt(p.current_stock||0)})),N(),m({name:"",supplier_id:"",purchase_price:"",selling_price:"",current_stock:0}),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error adding local product:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c"})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u0644\u064a\u0629"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0639"})]})}),(0,Lt.jsx)("tbody",{children:n.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 font-semibold",children:e.name}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.supplier_name}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",e.purchase_price.toFixed(2)]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",e.selling_price.toFixed(2)]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.current_stock||0}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.total_sold||0})]},e.id)))})]})})]})]}),"transactions"===s&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629"})]})}),(0,Lt.jsx)("tbody",{children:l.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.supplier_name}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("purchase"===e.transaction_type?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:"purchase"===e.transaction_type?"\u0634\u0631\u0627\u0621":"\u062f\u0641\u0639"})}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold ".concat("purchase"===e.transaction_type?"text-red-600":"text-green-600"),children:["\u062c.\u0645 ",e.amount.toFixed(2)]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.description}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.product_name||"-"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.quantity||"-"})]},e.id)))})]})})]}),"payments"===s&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0633\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,Lt.jsxs)("select",{value:b,onChange:e=>g(e.target.value),className:"p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0631\u062f"}),e.filter((e=>(e.balance||0)>0)).map((e=>(0,Lt.jsxs)("option",{value:e.id,children:[e.name," - \u0645\u0633\u062a\u062d\u0642: \u062c.\u0645 ",(e.balance||0).toFixed(2)]},e.id)))]}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:x,onChange:e=>y(e.target.value),placeholder:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639",className:"p-2 border border-gray-300 rounded"}),(0,Lt.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Lt.jsx)("option",{value:"vodafone_elsawy",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0627\u0644\u0635\u0627\u0648\u064a"}),(0,Lt.jsx)("option",{value:"vodafone_wael",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644"}),(0,Lt.jsx)("option",{value:"instapay",children:"\u0627\u0646\u0633\u062a\u0627 \u0628\u0627\u064a"})]})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(b&&x)try{await Rt.post("".concat(Ft,"/supplier-payment?supplier_id=").concat(b,"&amount=").concat(x,"&payment_method=").concat(v)),j(),_(),g(""),y(""),alert("\u062a\u0645 \u062f\u0641\u0639 \u0627\u0644\u0645\u0628\u0644\u063a \u0644\u0644\u0645\u0648\u0631\u062f \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error paying supplier:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062f\u0641\u0639 \u0627\u0644\u0645\u0628\u0644\u063a")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0648\u0631\u062f \u0648\u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0645\u0628\u0644\u063a")},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062f\u0641\u0639 \u0627\u0644\u0645\u0628\u0644\u063a"})]})]})},qt=()=>{const{user:e}=At();if("Elsawy"!==(null===e||void 0===e?void 0:e.username))return(0,Lt.jsx)("div",{className:"p-6",dir:"rtl",children:(0,Lt.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,Lt.jsx)("strong",{children:"\u063a\u064a\u0631 \u0645\u0633\u0645\u0648\u062d!"})," \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0645\u062e\u0635\u0635\u0629 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645 Elsawy \u0641\u0642\u0637."]})});const[t,n]=(0,a.useState)({total_sales:0,total_expenses:0,net_profit:0,total_unpaid:0,invoice_count:0,customer_count:0});(0,a.useEffect)((()=>{r()}),[]);const r=async()=>{try{const e=await Rt.get("".concat(Ft,"/dashboard/stats"));n(e.data)}catch(e){console.error("Error fetching stats:",e)}};return(0,Lt.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white shadow-lg",children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"}),(0,Lt.jsxs)("p",{className:"text-blue-100",children:["\u0645\u0631\u062d\u0628\u0627\u064b ",null===e||void 0===e?void 0:e.username," - \u0625\u0644\u064a\u0643 \u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0623\u062f\u0627\u0621 \u0627\u0644\u0646\u0634\u0627\u0637"]})]}),(0,Lt.jsx)("div",{className:"text-6xl opacity-20",children:"\ud83d\udcca"})]}),(0,Lt.jsxs)("div",{className:"flex flex-wrap space-x-4 space-x-reverse mt-6",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u061f \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647."))try{await Rt.delete("".concat(Ft,"/customers/clear-all")),await Rt.delete("".concat(Ft,"/raw-materials/clear-all")),await Rt.delete("".concat(Ft,"/finished-products/clear-all")),await Rt.delete("".concat(Ft,"/invoices/clear-all")),await Rt.delete("".concat(Ft,"/expenses/clear-all")),await Rt.delete("".concat(Ft,"/payments/clear-all")),await Rt.delete("".concat(Ft,"/work-orders/clear-all")),r(),alert("\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}catch(e){console.error("Error clearing all data:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105",children:"\ud83d\uddd1\ufe0f \u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:r,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105",children:"\ud83d\udd04 \u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>(()=>{const e=(new Date).toLocaleDateString("ar-EG");let n='\n      <div style="font-family: Arial, sans-serif; direction: rtl; text-align: right;">\n        <div style="text-align: center; margin-bottom: 20px;">\n          <h1>\u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644</h1>\n          <p>\u0627\u0644\u062d\u0631\u0641\u064a\u0627\u0646 \u0634\u0627\u0631\u0639 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a - 01020630677</p>\n          <h2>\u062a\u0642\u0631\u064a\u0631 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645</h2>\n          <p>\u0627\u0644\u062a\u0627\u0631\u064a\u062e: '.concat(e,'</p>\n        </div>\n        <table style="width: 100%; border-collapse: collapse;">\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">\u062c.\u0645 ').concat(t.total_sales.toFixed(2),'</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">\u062c.\u0645 ').concat(t.total_expenses.toFixed(2),'</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">\u062c.\u0645 ').concat(t.net_profit.toFixed(2),'</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642\u0629:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">\u062c.\u0645 ').concat(t.total_unpaid.toFixed(2),'</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">').concat(t.invoice_count,'</td>\n          </tr>\n          <tr>\n            <td style="border: 1px solid #ddd; padding: 10px;"><strong>\u0639\u062f\u062f \u0627\u0644\u0639\u0645\u0644\u0627\u0621:</strong></td>\n            <td style="border: 1px solid #ddd; padding: 10px;">').concat(t.customer_count,"</td>\n          </tr>\n        </table>\n      </div>\n    ");const r=window.open("","_blank");r.document.write(n),r.document.close(),r.print()})(),className:"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl hover:transform hover:scale-105",children:"\ud83d\udda8\ufe0f \u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsxs)("select",{className:"bg-white text-gray-700 border-0 rounded-lg px-4 py-3 shadow-lg focus:ring-2 focus:ring-blue-300 font-medium",children:[(0,Lt.jsx)("option",{children:"\ud83d\udcc5 \u064a\u0648\u0645\u064a"}),(0,Lt.jsx)("option",{children:"\ud83d\udcc6 \u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Lt.jsx)("option",{children:"\ud83d\udcca \u0634\u0647\u0631\u064a"}),(0,Lt.jsx)("option",{children:"\ud83d\udcc8 \u0633\u0646\u0648\u064a"})]})]})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["\u062c.\u0645 ",t.total_sales.toFixed(2)]})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\ud83d\udcb0"})]})}),(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["\u062c.\u0645 ",t.total_expenses.toFixed(2)]})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\ud83d\udcb8"})]})}),(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["\u062c.\u0645 ",t.net_profit.toFixed(2)]})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\ud83d\udcc8"})]})}),(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-orange-400 to-orange-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642\u0629"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["\u062c.\u0645 ",t.total_unpaid.toFixed(2)]})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\u23f3"})]})}),(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Lt.jsx)("p",{className:"text-3xl font-bold mt-2",children:t.invoice_count})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\ud83e\uddfe"})]})}),(0,Lt.jsx)("div",{className:"bg-gradient-to-br from-teal-400 to-teal-600 p-6 rounded-xl text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:transform hover:scale-105",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold opacity-90",children:"\u0639\u062f\u062f \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Lt.jsx)("p",{className:"text-3xl font-bold mt-2",children:t.customer_count})]}),(0,Lt.jsx)("div",{className:"text-5xl opacity-30",children:"\ud83d\udc65"})]})})]})]})},Ht=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[p,m]=(0,a.useState)({seal_type:"RSL",material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",quantity:1,unit_price:"",product_type:"manufactured"}),[f,h]=(0,a.useState)({product_size:"",product_type:"",purchase_price:"",selling_price:"",supplier:""}),[b,g]=(0,a.useState)([]),[x,y]=(0,a.useState)("\u0646\u0642\u062f\u064a"),[v,w]=(0,a.useState)(0),[j,N]=(0,a.useState)("amount"),[_,k]=(0,a.useState)(null),[S,E]=(0,a.useState)(null),[C,P]=(0,a.useState)("\u0645\u0645"),[T,O]=(0,a.useState)("");(0,a.useEffect)((()=>{R()}),[]);const R=async()=>{try{const e=await Rt.get("".concat(Ft,"/customers"));t(e.data)}catch(e){console.error("Error fetching customers:",e)}},L=e=>{const t='\n      <!DOCTYPE html>\n      <html dir="rtl">\n      <head>\n        <meta charset="UTF-8">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 20px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 18px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 18px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        \x3c!-- Header Section --\x3e\n        <div class="header">\n          <div class="company-info">\n            <h1 class="company-name">\u0634\u0631\u0643\u0629 \u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644</h1>\n            <p class="company-subtitle">\u062a\u0635\u0646\u064a\u0639 \u062c\u0645\u064a\u0639 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0623\u0648\u064a\u0644 \u0633\u064a\u0644</p>\n            <p class="company-details">\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0642\u0637\u0627\u0631 \u062d\u062a\u0649 \u0665\u0660\u0660\u0645\u0644</p>\n            <p class="company-details">\u0647\u064a\u062f\u0631\u0648\u0644\u064a\u0643 - \u0646\u064a\u0648\u0645\u0627\u062a\u064a\u0643</p>\n          </div>\n          \n          <div class="logo-section">\n            <img src="https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg" \n                 alt="Master Seal Logo" \n                 style="max-width: 120px; max-height: 80px; margin-bottom: 10px;">\n            <div class="invoice-title">'.concat(e.invoice_title||"\u0639\u0631\u0636 \u0633\u0639\u0631",'</div>\n            <div class="invoice-number">').concat(e.invoice_number,'</div>\n          </div>\n        </div>\n\n        \x3c!-- Customer and Date Info --\x3e\n        <div class="customer-info">\n          <div class="customer-details">\n            <p><strong>\u0627\u0644\u0633\u0627\u062f\u0629:</strong> ').concat(e.customer_name,"</p>\n            <p><strong>\u0627\u0644\u0639\u0646\u0648\u0627\u0646:</strong> ").concat(e.customer_address||"........................",'</p>\n          </div>\n          <div class="date-info">\n            <p><strong>\u062a\u062d\u0631\u064a\u0631 \u0641\u064a:</strong> ').concat(new Date(e.date).toLocaleDateString("ar-EG"),"</p>\n            <p><strong>Date:</strong> ").concat(new Date(e.date).toLocaleDateString("en-GB"),'</p>\n          </div>\n        </div>\n\n        \x3c!-- Products Table --\x3e\n        <table class="products-table">\n          <thead>\n            <tr>\n              <th style="width: 60px;">\u0627\u0644\u0645\u0633\u0644\u0633\u0644<br>Item</th>\n              <th style="width: 80px;">\u0627\u0644\u0643\u0645\u064a\u0629<br>QTY</th>\n              <th style="width: 200px;">Description<br>\u0627\u0644\u0645\u0648\u0627\u0635\u0641\u0627\u062a</th>\n              <th style="width: 100px;">\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629<br>Unit Price</th>\n              <th style="width: 100px;">\u0625\u062c\u0645\u0627\u0644\u064a<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(e.items.map(((e,t)=>"\n              <tr>\n                <td>".concat(t+1,"</td>\n                <td>").concat(e.quantity,'</td>\n                <td style="text-align: right;">\n                  ').concat(e.local_product_details?"".concat(e.local_product_details.product_size," - ").concat(e.local_product_details.product_type):"".concat(e.seal_type," - ").concat(e.material_type,"<br>\n                    <small>").concat(e.inner_diameter," \xd7 ").concat(e.outer_diameter," \xd7 ").concat(e.height," \u0645\u0645").concat(e.wall_height?" (\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u062d\u064a\u0637\u0629: ".concat(e.wall_height," \u0645\u0645)"):"","</small>"),"\n                </td>\n                <td>\u062c.\u0645 ").concat(e.unit_price.toFixed(2),"</td>\n                <td>\u062c.\u0645 ").concat(e.total_price.toFixed(2),"</td>\n              </tr>\n            "))).join(""),"\n            \x3c!-- Empty rows for additional items --\x3e\n            ").concat(Array.from({length:Math.max(0,8-e.items.length)},((e,t)=>'\n              <tr style="height: 40px;">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            ')).join(""),'\n          </tbody>\n        </table>\n\n        \x3c!-- Total Section --\x3e\n        <div class="total-section">\n          <div style="text-align: left; margin-bottom: 10px;">\n            ').concat(e.subtotal?'\n              <div style="margin-bottom: 5px;">\n                <span>\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a: \u062c.\u0645 '.concat(e.subtotal.toFixed(2),"</span>\n              </div>\n            "):"","\n            ").concat(e.discount&&e.discount>0?'\n              <div style="margin-bottom: 5px; color: #d32f2f;">\n                <span>\u0627\u0644\u062e\u0635\u0645: - \u062c.\u0645 '.concat(e.discount.toFixed(2),"</span>\n                ").concat("percentage"===e.discount_type&&e.discount_value?" <small>(".concat(e.discount_value,"%)</small>"):"",'\n              </div>\n              <hr style="margin: 5px 0; border: 1px solid #000;">\n            '):"",'\n          </div>\n          <div class="total-amount">\n            \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0647\u0627\u0626\u064a: \u062c.\u0645 ').concat((e.total_after_discount||e.total_amount).toFixed(2),'\n          </div>\n        </div>\n\n        \x3c!-- Additional Info --\x3e\n        <div style="margin-top: 20px; text-align: center; font-size: 12px;">\n          <p><strong>\u0645\u0644\u062d\u0648\u0638\u0629:</strong> \u0641\u0642\u0637 \u0648\u0642\u062f\u0631\u0647</p>\n          <div style="height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;"></div>\n        </div>\n\n        \x3c!-- Footer --\x3e\n        <div class="footer">\n          <div>\n            <p><strong>\u0627\u0644\u062a\u0648\u0642\u064a\u0639:</strong></p>\n            <p>\u0645\u0648\u0628\u0627\u064a\u0644: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667 - \u0660\u0661\u0660\u0666\u0662\u0663\u0669\u0660\u0668\u0667\u0660</p>\n            <p>\u062a\u0644\u064a\u0641\u0648\u0646: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667</p>\n          </div>\n          <div style="text-align: left;">\n            <p><strong>\u0627\u0644\u0645\u0633\u062a\u0644\u0645:</strong></p>\n            <p>\u0627\u0644\u062d\u0631\u0641\u064a\u064a\u0646 - \u0627\u0644\u0633\u0644\u0627\u0645 - \u0623\u0645\u0627\u0645 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a</p>\n            <p>\u0645\u0648\u0628\u0627\u064a\u0644: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667 - \u0660\u0661\u0660\u0666\u0662\u0663\u0669\u0660\u0668\u0667\u0660</p>\n          </div>\n        </div>\n\n        \x3c!-- Note --\x3e\n        <div style="text-align: center; margin-top: 20px; font-size: 11px; color: #666;">\n          <p>\u064a\u0642\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a \u0628\u0623\u0646\u0647 \u0642\u0627\u0645 \u0628\u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629 \u0648\u0642\u0628\u0648\u0644\u0647\u0627</p>\n        </div>\n      </body>\n      </html>\n    '),n=window.open("","_blank");n.document.write(t),n.document.close(),n.print()};return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-6",children:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("div",{children:(0,Lt.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0639\u0645\u064a\u0644"}),e.map((e=>(0,Lt.jsx)("option",{value:e.id,children:e.name},e.id)))]})}),(0,Lt.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,Lt.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"\u0627\u0633\u0645 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f",className:"flex-1 p-2 border border-gray-300 rounded"}),(0,Lt.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u062a\u0635\u0646\u064a\u0639"}),(0,Lt.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",className:"w-full p-2 border border-gray-300 rounded"})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c"}),(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsxs)("select",{value:p.product_type,onChange:e=>m(d(d({},p),{},{product_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"manufactured",children:"\u0645\u0646\u062a\u062c \u062a\u0635\u0646\u064a\u0639"}),(0,Lt.jsx)("option",{value:"local",children:"\u0645\u0646\u062a\u062c \u0645\u062d\u0644\u064a"})]})]}),"manufactured"===p.product_type?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("select",{value:p.seal_type,onChange:e=>m(d(d({},p),{},{seal_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:["RSL","RS","RSE","B17","B3","B14","B1","R15","R17","W1","W4","W5","W11","WBT","XR","CH","VR"].map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("select",{value:p.material_type,onChange:e=>m(d(d({},p),{},{material_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:["NBR","BUR","BT","VT","BOOM"].map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("input",{type:"number",value:p.inner_diameter,onChange:e=>m(d(d({},p),{},{inner_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("input",{type:"number",value:p.outer_diameter,onChange:e=>m(d(d({},p),{},{outer_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("input",{type:"number",value:p.height,onChange:e=>m(d(d({},p),{},{height:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),p.seal_type&&p.seal_type.startsWith("W")&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u062d\u064a\u0637\u0629"}),(0,Lt.jsx)("input",{type:"number",value:T,onChange:e=>O(e.target.value),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u062d\u064a\u0637\u0629 \u0644\u0644\u0633\u064a\u0644 \u0646\u0648\u0639 W"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0648\u062d\u062f\u0629 \u0627\u0644\u0642\u064a\u0627\u0633"}),(0,Lt.jsxs)("select",{value:C,onChange:e=>P(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"\u0645\u0645",children:"\u0645\u0644\u064a\u0645\u062a\u0631 (\u0645\u0645)"}),(0,Lt.jsx)("option",{value:"\u0628\u0648\u0635\u0629",children:"\u0628\u0648\u0635\u0629"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0639\u062f\u062f \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("input",{type:"number",value:p.quantity,onChange:e=>m(d(d({},p),{},{quantity:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0633\u0639\u0631 \u0627\u0644\u0633\u064a\u0644 \u0627\u0644\u0648\u0627\u062d\u062f"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:p.unit_price,onChange:e=>m(d(d({},p),{},{unit_price:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsx)("div",{className:"flex items-end",children:(0,Lt.jsx)("button",{onClick:async()=>{if(!p.inner_diameter||!p.outer_diameter||!p.height)return void alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0642\u0627\u0633\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=parseFloat(p.inner_diameter),t=parseFloat(p.outer_diameter),n=parseFloat(p.height);if(isNaN(e)||isNaN(t)||isNaN(n))alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0623\u0631\u0642\u0627\u0645 \u0635\u062d\u064a\u062d\u0629 \u0644\u0644\u0645\u0642\u0627\u0633\u0627\u062a");else try{const r=await Rt.post("".concat(Ft,"/compatibility-check"),{seal_type:p.seal_type,inner_diameter:e,outer_diameter:t,height:n});k(r.data)}catch(r){console.error("Error checking compatibility:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0641\u062d\u0635 \u0627\u0644\u062a\u0648\u0627\u0641\u0642")}},className:"w-full bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600",children:"\u0641\u062d\u0635 \u0627\u0644\u062a\u0648\u0627\u0641\u0642"})})]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0642\u0627\u0633 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsx)("input",{type:"text",value:f.product_size,onChange:e=>h(d(d({},f),{},{product_size:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u0642\u0627\u0633 \u0627\u0644\u0645\u0646\u062a\u062c"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsx)("input",{type:"text",value:f.product_type,onChange:e=>h(d(d({},f),{},{product_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0646\u062a\u062c"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Lt.jsx)("input",{type:"text",value:f.supplier,onChange:e=>h(d(d({},f),{},{supplier:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:f.purchase_price,onChange:e=>h(d(d({},f),{},{purchase_price:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:f.selling_price,onChange:e=>h(d(d({},f),{},{selling_price:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("input",{type:"number",value:p.quantity,onChange:e=>m(d(d({},p),{},{quantity:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]})]})}),(0,Lt.jsx)("button",{onClick:()=>{if("manufactured"===p.product_type){if(!p.inner_diameter||!p.outer_diameter||!p.height||!p.unit_price)return void alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=d(d({},p),{},{inner_diameter:parseFloat(p.inner_diameter),outer_diameter:parseFloat(p.outer_diameter),height:parseFloat(p.height),quantity:parseInt(p.quantity),unit_price:parseFloat(p.unit_price),total_price:parseFloat(p.unit_price)*parseInt(p.quantity),material_used:S?S.unit_code:null,material_details:S?{unit_code:S.unit_code,inner_diameter:S.inner_diameter,outer_diameter:S.outer_diameter,height:S.height,material_type:S.material_type,is_finished_product:S.is_finished_product||!1}:null});g([...b,e]),m({seal_type:"RSL",material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",quantity:1,unit_price:"",product_type:"manufactured"})}else{if(!f.product_size||!f.product_type||!f.selling_price||!f.supplier||!f.purchase_price)return void alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0645\u062d\u0644\u064a");const e={seal_type:null,material_type:null,inner_diameter:null,outer_diameter:null,height:null,product_type:"local",product_name:"".concat(f.product_size," - ").concat(f.product_type),product_size:f.product_size,product_type_name:f.product_type,supplier:f.supplier,purchase_price:parseFloat(f.purchase_price),selling_price:parseFloat(f.selling_price),quantity:parseInt(p.quantity),unit_price:parseFloat(f.selling_price),total_price:parseFloat(f.selling_price)*parseInt(p.quantity),local_product_details:{product_size:f.product_size,product_type:f.product_type,supplier:f.supplier,purchase_price:parseFloat(f.purchase_price),selling_price:parseFloat(f.selling_price)}};g([...b,e]),h({product_size:"",product_type:"",purchase_price:"",selling_price:"",supplier:""}),m({seal_type:"RSL",material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",quantity:1,unit_price:"",product_type:"manufactured"})}k(null),E(null)},className:"w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 mt-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0644\u0644\u0641\u0627\u062a\u0648\u0631\u0629"})]})]}),_&&(0,Lt.jsxs)("div",{className:"mt-6 bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0646\u062a\u0627\u0626\u062c \u0641\u062d\u0635 \u0627\u0644\u062a\u0648\u0627\u0641\u0642"}),_.compatible_materials.length>0&&(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u0644\u062e\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0627\u0641\u0642\u0629:"}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.compatible_materials.map(((e,t)=>(0,Lt.jsxs)("div",{className:"p-3 border rounded cursor-pointer transition-colors ".concat((null===S||void 0===S?void 0:S.unit_code)===e.unit_code&&(null===S||void 0===S?void 0:S.inner_diameter)===e.inner_diameter&&(null===S||void 0===S?void 0:S.outer_diameter)===e.outer_diameter&&(null===S||void 0===S?void 0:S.height)===e.height?"border-blue-500 bg-blue-50":e.low_stock?"border-red-300 bg-red-50 hover:bg-red-100":"border-green-300 bg-green-50 hover:bg-green-100"),onClick:()=>E(e),children:[(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0646\u0648\u0639:"})," ",e.material_type]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0643\u0648\u062f:"})," ",e.unit_code]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0645\u0642\u0627\u0633:"})," ",e.inner_diameter," \xd7 ",e.outer_diameter," \xd7 ",e.height]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639:"})," ",e.pieces_count]}),e.warning&&(0,Lt.jsx)("p",{className:"text-red-600 text-sm",children:e.warning}),(null===S||void 0===S?void 0:S.unit_code)===e.unit_code&&(null===S||void 0===S?void 0:S.inner_diameter)===e.inner_diameter&&(null===S||void 0===S?void 0:S.outer_diameter)===e.outer_diameter&&(null===S||void 0===S?void 0:S.height)===e.height&&(0,Lt.jsx)("p",{className:"text-blue-600 font-semibold text-sm mt-2",children:"\u2713 \u0645\u062d\u062f\u062f \u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"})]},t)))})]}),_.compatible_products.length>0&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u062c\u0627\u0647\u0632\u0629:"}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.compatible_products.map(((e,t)=>(0,Lt.jsxs)("div",{className:"p-3 border border-blue-300 bg-blue-50 rounded cursor-pointer hover:bg-blue-100",onClick:()=>E({unit_code:"FINISHED-".concat(e.id),material_type:e.material_type,seal_type:e.seal_type,inner_diameter:e.inner_diameter,outer_diameter:e.outer_diameter,height:e.height,is_finished_product:!0}),children:[(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0646\u0648\u0639:"})," ",e.seal_type," - ",e.material_type]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0645\u0642\u0627\u0633:"})," ",e.inner_diameter," \xd7 ",e.outer_diameter," \xd7 ",e.height]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0643\u0645\u064a\u0629:"})," ",e.quantity]})]},t)))})]}),S&&(0,Lt.jsx)("div",{className:"mt-4 p-3 bg-blue-100 rounded",children:(0,Lt.jsxs)("p",{className:"font-semibold text-blue-800",children:["\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062e\u0627\u0645\u0629: ",S.unit_code," (",S.material_type,")"]})})]}),b.length>0&&(0,Lt.jsxs)("div",{className:"mt-6 bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0623\u062e\u064a\u0631\u0629"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0642\u0627\u0633"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"})]})}),(0,Lt.jsx)("tbody",{children:b.map(((e,t)=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.seal_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.material_type}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.inner_diameter," \xd7 ",e.outer_diameter," \xd7 ",e.height]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.quantity}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",e.unit_price]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",e.total_price]})]},t)))})]})}),(0,Lt.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Lt.jsxs)("select",{value:x,onChange:e=>y(e.target.value),className:"p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"\u0646\u0642\u062f\u064a",children:"\u0646\u0642\u062f\u064a"}),(0,Lt.jsx)("option",{value:"\u0622\u062c\u0644",children:"\u0622\u062c\u0644"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f"}),(0,Lt.jsx)("option",{value:"\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a",children:"\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a"}),(0,Lt.jsx)("option",{value:"\u064a\u062f \u0627\u0644\u0635\u0627\u0648\u064a",children:"\u064a\u062f \u0627\u0644\u0635\u0627\u0648\u064a"})]})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0635\u0645"}),(0,Lt.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"p-2 border border-gray-300 rounded w-full",children:[(0,Lt.jsx)("option",{value:"amount",children:"\u0645\u0628\u0644\u063a \u062b\u0627\u0628\u062a"}),(0,Lt.jsx)("option",{value:"percentage",children:"\u0646\u0633\u0628\u0629 \u0645\u0626\u0648\u064a\u0629"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645 ","percentage"===j?"(%)":"(\u062c.\u0645)"]}),(0,Lt.jsx)("input",{type:"number",value:v,onChange:e=>w(e.target.value),className:"p-2 border border-gray-300 rounded w-full",placeholder:"0",min:"0",step:"percentage"===j?"0.1":"0.01"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0628\u0644\u063a \u0627\u0644\u062e\u0635\u0645"}),(0,Lt.jsxs)("div",{className:"p-2 bg-white border border-gray-300 rounded w-full",children:["\u062c.\u0645 ",(()=>{const e=b.reduce(((e,t)=>e+t.total_price),0);return("percentage"===j?e*parseFloat(v||0)/100:parseFloat(v||0)).toFixed(2)})()]})]})]}),(0,Lt.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Lt.jsx)("span",{className:"text-lg",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a:"}),(0,Lt.jsxs)("span",{className:"text-lg font-semibold",children:["\u062c.\u0645 ",b.reduce(((e,t)=>e+t.total_price),0).toFixed(2)]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Lt.jsx)("span",{className:"text-lg",children:"\u0627\u0644\u062e\u0635\u0645:"}),(0,Lt.jsxs)("span",{className:"text-lg font-semibold text-red-600",children:["- \u062c.\u0645 ",(()=>{const e=b.reduce(((e,t)=>e+t.total_price),0);return("percentage"===j?e*parseFloat(v||0)/100:parseFloat(v||0)).toFixed(2)})()]})]}),(0,Lt.jsx)("hr",{className:"my-2"}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Lt.jsx)("span",{className:"text-xl font-bold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0647\u0627\u0626\u064a:"}),(0,Lt.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["\u062c.\u0645 ",(()=>{const e=b.reduce(((e,t)=>e+t.total_price),0);return(e-("percentage"===j?e*parseFloat(v||0)/100:parseFloat(v||0))).toFixed(2)})()]})]})]}),(0,Lt.jsxs)("div",{className:"text-xl font-bold",style:{display:"none"},children:["\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: \u062c.\u0645 ",b.reduce(((e,t)=>e+t.total_price),0).toFixed(2)]})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(l||n)if(0!==b.length)try{let t=l,a="";if(!l&&n){const e=await Rt.post("".concat(Ft,"/customers"),{name:n,phone:"",address:""});t=e.data.id,a=n,R()}else{const n=e.find((e=>e.id===t));a=n?n.name:""}const d=b.reduce(((e,t)=>e+t.total_price),0),p="percentage"===j?d*parseFloat(v||0)/100:parseFloat(v||0),m=d-p,f={customer_id:t,customer_name:a,invoice_title:c,supervisor_name:s,items:b,payment_method:x,subtotal:d,discount:p,discount_type:j,discount_value:parseFloat(v||0),total_after_discount:m,notes:""},h=await Rt.post("".concat(Ft,"/invoices?supervisor_name=").concat(encodeURIComponent(s)),f);h.data&&(alert("\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d"),g([]),o(""),r(""),i(""),u(""),y("\u0646\u0642\u062f\u064a"),w(0),N("amount"),L(h.data))}catch(t){console.error("Error creating invoice:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c\u0627\u062a \u0644\u0644\u0641\u0627\u062a\u0648\u0631\u0629");else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0639\u0645\u064a\u0644 \u0623\u0648 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f")},className:"w-full bg-green-500 text-white p-3 rounded hover:bg-green-600 mt-4 text-lg font-semibold",children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"})]})]})},Vt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(""),[s,i]=(0,a.useState)({material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",pieces_count:"",cost_per_mm:""}),[c,u]=(0,a.useState)({seal_type:"RSL",material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",quantity:"",unit_price:""}),p=["NBR","BUR","BT","VT","BOOM"],m=e.filter((e=>e.material_type.toLowerCase().includes(l.toLowerCase())||e.unit_code.toLowerCase().includes(l.toLowerCase())||e.inner_diameter.toString().includes(l)||e.outer_diameter.toString().includes(l)||e.height.toString().includes(l))).sort(((e,t)=>{const n={BUR:1,NBR:2,BT:3,BOOM:4,VT:5},r=n[e.material_type]||6,a=n[t.material_type]||6;return r!==a?r-a:e.inner_diameter!==t.inner_diameter?e.inner_diameter-t.inner_diameter:e.outer_diameter-t.outer_diameter})),f=n.filter((e=>e.seal_type.toLowerCase().includes(l.toLowerCase())||e.material_type.toLowerCase().includes(l.toLowerCase())||e.inner_diameter.toString().includes(l)||e.outer_diameter.toString().includes(l)||e.height.toString().includes(l))).sort(((e,t)=>{const n={BUR:1,NBR:2,BT:3,BOOM:4,VT:5},r=n[e.material_type]||6,a=n[t.material_type]||6;return r!==a?r-a:e.inner_diameter!==t.inner_diameter?e.inner_diameter-t.inner_diameter:e.outer_diameter-t.outer_diameter}));(0,a.useEffect)((()=>{h(),b()}),[]);const h=async()=>{try{const e=await Rt.get("".concat(Ft,"/raw-materials"));t(e.data)}catch(e){console.error("Error fetching raw materials:",e)}},b=async()=>{try{const e=await Rt.get("".concat(Ft,"/finished-products"));r(e.data)}catch(e){console.error("Error fetching finished products:",e)}};return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold",children:"\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645"}),(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645\u061f"))try{await Rt.delete("".concat(Ft,"/raw-materials/clear-all")),h(),alert("\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645")}catch(e){console.error("Error clearing raw materials:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645")}},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("select",{value:s.material_type,onChange:e=>i(d(d({},s),{},{material_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:p.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("input",{type:"number",value:s.inner_diameter,onChange:e=>i(d(d({},s),{},{inner_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("input",{type:"number",value:s.outer_diameter,onChange:e=>i(d(d({},s),{},{outer_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0627\u0631\u062a\u0641\u0627\u0639 (\u0645\u0645)"}),(0,Lt.jsx)("input",{type:"number",value:s.height,onChange:e=>i(d(d({},s),{},{height:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639"}),(0,Lt.jsx)("input",{type:"number",value:s.pieces_count,onChange:e=>i(d(d({},s),{},{pieces_count:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u0644\u0644\u064a"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:s.cost_per_mm,onChange:e=>i(d(d({},s),{},{cost_per_mm:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,Lt.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"\u0645\u0644\u0627\u062d\u0638\u0629: \u0633\u064a\u062a\u0645 \u062a\u0648\u0644\u064a\u062f \u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u062d\u0633\u0628 \u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629 \u0648\u0627\u0644\u0645\u0648\u0627\u0635\u0641\u0627\u062a"}),(0,Lt.jsx)("button",{onClick:async()=>{if(s.inner_diameter&&s.outer_diameter&&s.height&&s.pieces_count&&s.cost_per_mm)try{const e={material_type:s.material_type,inner_diameter:parseFloat(s.inner_diameter),outer_diameter:parseFloat(s.outer_diameter),height:parseFloat(s.height),pieces_count:parseInt(s.pieces_count),cost_per_mm:parseFloat(s.cost_per_mm)},t=await Rt.post("".concat(Ft,"/raw-materials"),e);alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0627\u062f\u0629 \u0627\u0644\u062e\u0627\u0645 \u0628\u0646\u062c\u0627\u062d. \u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629: ".concat(t.data.unit_code)),h(),i({material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",pieces_count:"",cost_per_mm:""})}catch(n){var e,t;console.error("Error adding raw material:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0627\u062f\u0629 \u0627\u0644\u062e\u0627\u0645: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0627\u062f\u0629 \u062e\u0627\u0645"}),(0,Lt.jsx)("div",{className:"mb-4",children:(0,Lt.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 (\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629\u060c \u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629\u060c \u0627\u0644\u0645\u0642\u0627\u0633\u0627\u062a...)",className:"w-full p-3 border border-gray-300 rounded-lg"})}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0627\u0631\u062a\u0641\u0627\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u0644\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:m.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.material_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.inner_diameter}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.outer_diameter}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.height}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.pieces_count}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.unit_code}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.cost_per_mm}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0645\u0627\u062f\u0629 \u0627\u0644\u062e\u0627\u0645\u061f"))try{await Rt.delete("".concat(Ft,"/raw-materials/").concat(e)),h(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0627\u062f\u0629 \u0627\u0644\u062e\u0627\u0645")}catch(t){console.error("Error deleting raw material:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0627\u062f\u0629 \u0627\u0644\u062e\u0627\u0645")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"})})]},e.id)))})]})})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0627\u0644\u062a\u0627\u0645"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("select",{value:c.seal_type,onChange:e=>u(d(d({},c),{},{seal_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:["RSL","RS","RSE","B17","B3","B14","B1","R15","R17","W1","W4","W5","W11","WBT","XR","CH","VR"].map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("select",{value:c.material_type,onChange:e=>u(d(d({},c),{},{material_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:p.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("input",{type:"number",value:c.inner_diameter,onChange:e=>u(d(d({},c),{},{inner_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("input",{type:"number",value:c.outer_diameter,onChange:e=>u(d(d({},c),{},{outer_diameter:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("input",{type:"number",value:c.height,onChange:e=>u(d(d({},c),{},{height:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("input",{type:"number",value:c.quantity,onChange:e=>u(d(d({},c),{},{quantity:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:c.unit_price,onChange:e=>u(d(d({},c),{},{unit_price:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(c.inner_diameter&&c.outer_diameter&&c.height&&c.quantity&&c.unit_price)try{const e={seal_type:c.seal_type,material_type:c.material_type,inner_diameter:parseFloat(c.inner_diameter),outer_diameter:parseFloat(c.outer_diameter),height:parseFloat(c.height),quantity:parseInt(c.quantity),unit_price:parseFloat(c.unit_price)};await Rt.post("".concat(Ft,"/finished-products"),e),b(),u({seal_type:"RSL",material_type:"NBR",inner_diameter:"",outer_diameter:"",height:"",quantity:"",unit_price:""}),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0646\u0647\u0627\u0626\u064a \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error adding finished product:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0646\u0647\u0627\u0626\u064a")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u0646\u0647\u0627\u0626\u064a"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062f\u0627\u062e\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0642\u0637\u0631 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0627\u0631\u062a\u0641\u0627\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:f.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.seal_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.material_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.inner_diameter}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.outer_diameter}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.height}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.quantity}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.unit_price}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0646\u0647\u0627\u0626\u064a\u061f"))try{await Rt.delete("".concat(Ft,"/finished-products/").concat(e)),b(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0646\u0647\u0627\u0626\u064a")}catch(t){console.error("Error deleting finished product:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0646\u0647\u0627\u0626\u064a")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"})})]},e.id)))})]})})]})]})},Wt=()=>{var e;const[t,n]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[o,s]=(0,a.useState)(""),[i,c]=(0,a.useState)("\u0646\u0642\u062f\u064a"),[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(null);(0,a.useEffect)((()=>{f(),h()}),[]);const f=async()=>{try{const e=(await Rt.get("".concat(Ft,"/invoices"))).data.filter((e=>"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629"===e.status||"\u0645\u062f\u0641\u0648\u0639\u0629 \u062c\u0632\u0626\u064a\u0627\u064b"===e.status||"\u0627\u0646\u062a\u0638\u0627\u0631"===e.status||e.remaining_amount>0));n(e)}catch(e){console.error("Error fetching unpaid invoices:",e)}},h=async()=>{try{const e=await Rt.get("".concat(Ft,"/customers"));l(e.data)}catch(e){console.error("Error fetching customers:",e)}};return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0627\u0644\u0622\u062c\u0644 - \u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:f,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2",children:[(0,Lt.jsx)("option",{children:"\u064a\u0648\u0645\u064a"}),(0,Lt.jsx)("option",{children:"\u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Lt.jsx)("option",{children:"\u0634\u0647\u0631\u064a"}),(0,Lt.jsx)("option",{children:"\u0633\u0646\u0648\u064a"})]})]})]}),p&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u062a\u0633\u062c\u064a\u0644 \u062f\u0641\u0639\u0629"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("input",{type:"text",value:p.invoice_number,disabled:!0,className:"w-full p-2 border border-gray-300 rounded bg-gray-100"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Lt.jsx)("input",{type:"text",value:p.customer_name,disabled:!0,className:"w-full p-2 border border-gray-300 rounded bg-gray-100"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642"}),(0,Lt.jsx)("input",{type:"text",value:"\u062c.\u0645 ".concat((null===(e=p.remaining_amount)||void 0===e?void 0:e.toFixed(2))||"0.00"),disabled:!0,className:"w-full p-2 border border-gray-300 rounded bg-gray-100"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0628\u0644\u063a \u0627\u0644\u062f\u0641\u0639\u0629"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:o,onChange:e=>s(e.target.value),className:"w-full p-2 border border-gray-300 rounded",placeholder:"0.00"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Lt.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"\u0646\u0642\u062f\u064a",children:"\u0646\u0642\u062f\u064a"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f"}),(0,Lt.jsx)("option",{value:"\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a",children:"\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a"})]})]}),(0,Lt.jsxs)("div",{className:"md:col-span-2",children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Lt.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(p&&o)if(parseFloat(o)>p.remaining_amount)alert("\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u062e\u0644 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642");else try{await Rt.post("".concat(Ft,"/payments"),{invoice_id:p.id,amount:parseFloat(o),payment_method:i,notes:d}),s(""),u(""),m(null),f(),alert("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u0641\u0639\u0629 \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error making payment:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u0641\u0639\u0629")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0648\u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0645\u0628\u0644\u063a")},className:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u0641\u0639\u0629"}),(0,Lt.jsx)("button",{onClick:()=>m(null),className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u063a\u064a\u0631 \u0627\u0644\u0645\u0633\u062f\u062f\u0629"}),(0,Lt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0633\u062a\u062d\u0642"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:t.map((e=>{var t,n,r;return(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.invoice_number}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.customer_name}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",(null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:["\u062c.\u0645 ",(null===(n=e.paid_amount)||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("span",{className:"font-bold text-red-600",children:["\u062c.\u0645 ",(null===(r=e.remaining_amount)||void 0===r?void 0:r.toFixed(2))||"0.00"]})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629"===e.status?"bg-red-100 text-red-800":"\u0645\u062f\u0641\u0648\u0639\u0629 \u062c\u0632\u0626\u064a\u0627\u064b"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>m(e),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"\u0639\u0631\u0636 \u0627\u0644\u062f\u0641\u0639\u0627\u062a"}),(0,Lt.jsx)("button",{onClick:()=>m(e),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"\u062f\u0641\u0639"})]})})]},e.id)}))})]}),0===t.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u063a\u064a\u0631 \u0645\u0633\u062f\u062f\u0629"})]}),(0,Lt.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Lt.jsxs)("div",{className:"bg-red-50 p-4 rounded",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-red-800",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642\u0629"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\u062c.\u0645 ",t.reduce(((e,t)=>e+(t.remaining_amount||0)),0).toFixed(2)]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-4 rounded",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-yellow-800",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0639\u0644\u0642\u0629"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:t.length})]}),(0,Lt.jsxs)("div",{className:"bg-blue-50 p-4 rounded",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-blue-800",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0623\u0635\u0644\u064a"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u062c.\u0645 ",t.reduce(((e,t)=>e+(t.total_amount||0)),0).toFixed(2)]})]})]})]})]})},$t=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)({description:"",amount:"",category:"\u062e\u0627\u0645\u0627\u062a"}),l=["\u062e\u0627\u0645\u0627\u062a","\u0631\u0648\u0627\u062a\u0628","\u0643\u0647\u0631\u0628\u0627\u0621","\u0635\u064a\u0627\u0646\u0629","\u0623\u062e\u0631\u0649"];(0,a.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await Rt.get("".concat(Ft,"/expenses"));t(e.data)}catch(e){console.error("Error fetching expenses:",e)}},s=()=>e.reduce(((e,t)=>e+t.amount),0);return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a\u061f \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647."))try{await Rt.delete("".concat(Ft,"/expenses/clear-all")),o(),alert("\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a")}catch(e){console.error("Error clearing expenses:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:o,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2",children:[(0,Lt.jsx)("option",{children:"\u064a\u0648\u0645\u064a"}),(0,Lt.jsx)("option",{children:"\u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Lt.jsx)("option",{children:"\u0634\u0647\u0631\u064a"}),(0,Lt.jsx)("option",{children:"\u0633\u0646\u0648\u064a"})]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641"}),(0,Lt.jsx)("input",{type:"text",value:n.description,onChange:e=>r(d(d({},n),{},{description:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u062b\u0627\u0644: \u0634\u0631\u0627\u0621 \u062e\u0627\u0645\u0627\u062a\u060c \u0643\u0647\u0631\u0628\u0627\u0621 \u0627\u0644\u0645\u0635\u0646\u0639"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:n.amount,onChange:e=>r(d(d({},n),{},{amount:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"0.00"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Lt.jsx)("select",{value:n.category,onChange:e=>r(d(d({},n),{},{category:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:l.map((e=>(0,Lt.jsx)("option",{value:e,children:e},e)))})]})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(n.description&&n.amount)try{await Rt.post("".concat(Ft,"/expenses"),d(d({},n),{},{amount:parseFloat(n.amount)})),r({description:"",amount:"",category:"\u062e\u0627\u0645\u0627\u062a"}),o(),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u0628\u0646\u062c\u0627\u062d")}catch(e){console.error("Error adding expense:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641")}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641"})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[(0,Lt.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["\u062c.\u0645 ",s().toFixed(2)]})]}),(0,Lt.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:e.length})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u0635\u0631\u0648\u0641"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-yellow-600",children:["\u062c.\u0645 ",e.length>0?(s()/e.length).toFixed(2):"0.00"]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0641\u0626\u0629"}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:Object.entries((()=>{const t={};return l.forEach((n=>{t[n]=e.filter((e=>e.category===n)).reduce(((e,t)=>e+t.amount),0)})),t})()).map((e=>{let[t,n]=e;return(0,Lt.jsxs)("div",{className:"text-center p-4 border rounded",children:[(0,Lt.jsx)("h4",{className:"font-medium text-gray-700",children:t}),(0,Lt.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["\u062c.\u0645 ",n.toFixed(2)]})]},t)}))})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:e.map((e=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.description}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("span",{className:"font-semibold text-red-600",children:["\u062c.\u0645 ",e.amount.toFixed(2)]})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("\u062e\u0627\u0645\u0627\u062a"===e.category?"bg-blue-100 text-blue-800":"\u0631\u0648\u0627\u062a\u0628"===e.category?"bg-green-100 text-green-800":"\u0643\u0647\u0631\u0628\u0627\u0621"===e.category?"bg-yellow-100 text-yellow-800":"\u0635\u064a\u0627\u0646\u0629"===e.category?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.category})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u061f"))try{await Rt.delete("".concat(Ft,"/expenses/").concat(e)),o(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error deleting expense:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641")}})(e.id),className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"})})]},e.id)))})]}),0===e.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0635\u0631\u0648\u0641\u0627\u062a \u0645\u0633\u062c\u0644\u0629"})]})]})]})},Qt=()=>{var e,t,n,r,l,o,s;const[i,c]=(0,a.useState)({total_revenue:0,total_expenses:0,material_cost:0,profit:0}),[d,u]=(0,a.useState)("daily");(0,a.useEffect)((()=>{p()}),[d]);const p=async()=>{try{const e=await Rt.get("".concat(Ft,"/reports/revenue?period=").concat(d));c(e.data)}catch(e){console.error("Error fetching revenue data:",e)}};return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded px-3 py-2",children:[(0,Lt.jsx)("option",{value:"daily",children:"\u0627\u0644\u064a\u0648\u0645"}),(0,Lt.jsx)("option",{value:"weekly",children:"\u0627\u0644\u0623\u0633\u0628\u0648\u0639"}),(0,Lt.jsx)("option",{value:"monthly",children:"\u0627\u0644\u0634\u0647\u0631"}),(0,Lt.jsx)("option",{value:"yearly",children:"\u0627\u0644\u0633\u0646\u0629"})]})]})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Lt.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-green-800 text-center mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-green-600 text-center",children:["\u062c.\u0645 ",(null===(e=i.total_revenue)||void 0===e?void 0:e.toFixed(2))||"0.00"]})]}),(0,Lt.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-red-800 text-center mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-red-600 text-center",children:["\u062c.\u0645 ",(null===(t=i.total_expenses)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 text-center mb-2",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u062e\u0627\u0645\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-yellow-600 text-center",children:["\u062c.\u0645 ",(null===(n=i.material_cost)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Lt.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 text-center mb-2",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d"}),(0,Lt.jsxs)("p",{className:"text-3xl font-bold text-center ".concat((i.profit||0)>=0?"text-blue-600":"text-red-600"),children:["\u062c.\u0645 ",(null===(r=i.profit)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mt-6",children:[(0,Lt.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a - ","daily"===d?"\u064a\u0648\u0645\u064a":"weekly"===d?"\u0623\u0633\u0628\u0648\u0639\u064a":"monthly"===d?"\u0634\u0647\u0631\u064a":"\u0633\u0646\u0648\u064a"]}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-3",children:"\u0627\u0644\u0628\u064a\u0627\u0646"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-3",children:"\u0627\u0644\u0645\u0628\u0644\u063a (\u062c.\u0645)"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-3",children:"\u0627\u0644\u0646\u0633\u0628\u0629 \u0627\u0644\u0645\u0626\u0648\u064a\u0629"})]})}),(0,Lt.jsxs)("tbody",{children:[(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-3 font-semibold",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-3 text-green-600 font-bold",children:(null===(l=i.total_revenue)||void 0===l?void 0:l.toFixed(2))||"0.00"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-3",children:"100%"})]}),(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-3",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u062e\u0627\u0645\u0627\u062a"}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-3 text-yellow-600 font-semibold",children:["-",(null===(o=i.material_cost)||void 0===o?void 0:o.toFixed(2))||"0.00"]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-3",children:[i.total_revenue>0?(i.material_cost/i.total_revenue*100).toFixed(1):"0.0","%"]})]}),(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-3",children:"\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u0623\u062e\u0631\u0649"}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-3 text-red-600 font-semibold",children:["-",((i.total_expenses||0)-(i.material_cost||0)).toFixed(2)]}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-3",children:[i.total_revenue>0?((i.total_expenses-i.material_cost)/i.total_revenue*100).toFixed(1):"0.0","%"]})]}),(0,Lt.jsxs)("tr",{className:"bg-blue-50",children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-3 font-bold",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d"}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-3 font-bold ".concat((i.profit||0)>=0?"text-blue-600":"text-red-600"),children:(null===(s=i.profit)||void 0===s?void 0:s.toFixed(2))||"0.00"}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-3 font-bold",children:[i.total_revenue>0?(i.profit/i.total_revenue*100).toFixed(1):"0.0","%"]})]})]})]})})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mt-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0624\u0634\u0631\u0627\u062a \u0627\u0644\u0623\u062f\u0627\u0621"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Lt.jsxs)("div",{className:"text-center p-4 border rounded",children:[(0,Lt.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold ".concat((i.profit||0)>=0?"text-green-600":"text-red-600"),children:[i.total_revenue>0?(i.profit/i.total_revenue*100).toFixed(1):"0.0","%"]})]}),(0,Lt.jsxs)("div",{className:"text-center p-4 border rounded",children:[(0,Lt.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\u0646\u0633\u0628\u0629 \u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u062e\u0627\u0645\u0627\u062a"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:[i.total_revenue>0?(i.material_cost/i.total_revenue*100).toFixed(1):"0.0","%"]})]}),(0,Lt.jsxs)("div",{className:"text-center p-4 border rounded",children:[(0,Lt.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[i.total_revenue>0?(i.total_expenses/i.total_revenue*100).toFixed(1):"0.0","%"]})]})]})]})]})},Kt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)({invoice_title:"",supervisor_name:"",customer_name:"",payment_method:"\u0646\u0642\u062f\u064a",discount_type:"amount",discount_value:0,items:[],notes:""});(0,a.useEffect)((()=>{f(),h()}),[]);const f=async()=>{try{const e=await Rt.get("".concat(Ft,"/invoices"));t(e.data)}catch(e){console.error("Error fetching invoices:",e)}},h=async()=>{try{const e=await Rt.get("".concat(Ft,"/customers"));r(e.data)}catch(e){console.error("Error fetching customers:",e)}},b=()=>{u(null),m({invoice_title:"",supervisor_name:"",customer_name:"",payment_method:"\u0646\u0642\u062f\u064a",discount_type:"amount",discount_value:0,items:[],notes:""})},g=e.filter((e=>{const t=""===l||e.status===l,n=""===s||e.invoice_number.toLowerCase().includes(s.toLowerCase())||e.customer_name.toLowerCase().includes(s.toLowerCase());return t&&n}));return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631\u061f \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647."))try{await Rt.delete("".concat(Ft,"/invoices/clear-all")),f(),alert("\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631")}catch(e){console.error("Error clearing invoices:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:f,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2",children:[(0,Lt.jsx)("option",{children:"\u064a\u0648\u0645\u064a"}),(0,Lt.jsx)("option",{children:"\u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Lt.jsx)("option",{children:"\u0634\u0647\u0631\u064a"}),(0,Lt.jsx)("option",{children:"\u0633\u0646\u0648\u064a"})]})]})]}),(0,Lt.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Lt.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Lt.jsx)("option",{value:"\u0645\u062f\u0641\u0648\u0639\u0629",children:"\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Lt.jsx)("option",{value:"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629",children:"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Lt.jsx)("option",{value:"\u0645\u062f\u0641\u0648\u0639\u0629 \u062c\u0632\u0626\u064a\u0627\u064b",children:"\u0645\u062f\u0641\u0648\u0639\u0629 \u062c\u0632\u0626\u064a\u0627\u064b"}),(0,Lt.jsx)("option",{value:"\u0627\u0646\u062a\u0638\u0627\u0631",children:"\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Lt.jsx)("option",{value:"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630",children:"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"})]})]}),(0,Lt.jsx)("div",{className:"flex items-end",children:(0,Lt.jsx)("button",{onClick:()=>{i(""),o("")},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Lt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,Lt.jsx)("h3",{className:"font-semibold text-blue-800",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.length})]}),(0,Lt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,Lt.jsx)("h3",{className:"font-semibold text-green-800",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter((e=>"\u0645\u062f\u0641\u0648\u0639\u0629"===e.status)).length})]}),(0,Lt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[(0,Lt.jsx)("h3",{className:"font-semibold text-red-800",children:"\u063a\u064a\u0631 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Lt.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.filter((e=>"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629"===e.status)).length})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[(0,Lt.jsx)("h3",{className:"font-semibold text-yellow-800",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["\u062c.\u0645 ",e.reduce(((e,t)=>e+(t.total_amount||0)),0).toFixed(2)]})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Lt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062e\u0635\u0645"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0647\u0627\u0626\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:g.map((e=>{var t,n,r;return(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 font-semibold",children:e.invoice_number}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.customer_name}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.payment_method}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold",children:["\u062c.\u0645 ",(null===(t=e.subtotal)||void 0===t?void 0:t.toFixed(2))||(null===(n=e.total_amount)||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 text-red-600",children:e.discount&&e.discount>0?(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("span",{children:["\u062c.\u0645 ",e.discount.toFixed(2)]}),"percentage"===e.discount_type&&e.discount_value&&(0,Lt.jsxs)("small",{className:"block text-xs",children:["(%",e.discount_value,")"]})]}):(0,Lt.jsx)("span",{className:"text-gray-400",children:"\u0644\u0627 \u064a\u0648\u062c\u062f"})}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold text-green-600",children:["\u062c.\u0645 ",(null===(r=e.total_after_discount||e.total_amount)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm cursor-pointer ".concat("\u0645\u062f\u0641\u0648\u0639\u0629"===e.status?"bg-green-100 text-green-800":"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629"===e.status?"bg-red-100 text-red-800":"\u0645\u062f\u0641\u0648\u0639\u0629 \u062c\u0632\u0626\u064a\u0627\u064b"===e.status?"bg-yellow-100 text-yellow-800":"\u0627\u0646\u062a\u0638\u0627\u0631"===e.status?"bg-blue-100 text-blue-800":"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"===e.status?"bg-green-100 text-green-800":"\u062a\u0645 \u0627\u0644\u062a\u0635\u0646\u064a\u0639"===e.status?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("div",{className:"flex space-x-2 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>(e=>{const t='\n      <!DOCTYPE html>\n      <html dir="rtl">\n      <head>\n        <meta charset="UTF-8">\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            direction: rtl;\n            font-size: 15px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 10px;\n            margin-bottom: 20px;\n          }\n          .company-info {\n            text-align: right;\n          }\n          .company-name {\n            font-size: 32px;\n            font-weight: bold;\n            color: #000;\n            margin: 0;\n          }\n          .company-subtitle {\n            font-size: 20px;\n            margin: 5px 0;\n            color: #666;\n          }\n          .company-details {\n            font-size: 16px;\n            margin: 2px 0;\n            color: #333;\n          }\n          .logo-section {\n            text-align: center;\n            flex: 1;\n          }\n          .invoice-title {\n            font-size: 22px;\n            font-weight: bold;\n            background-color: #ff4444;\n            color: white;\n            padding: 8px 20px;\n            border-radius: 5px;\n            display: inline-block;\n            margin-bottom: 10px;\n          }\n          .invoice-number {\n            font-size: 20px;\n            font-weight: bold;\n            color: #ff4444;\n          }\n          .customer-info {\n            display: flex;\n            justify-content: space-between;\n            margin: 20px 0;\n          }\n          .customer-details {\n            text-align: right;\n          }\n          .date-info {\n            text-align: left;\n          }\n          .products-table {\n            width: 100%;\n            border-collapse: collapse;\n            border: 2px solid #000;\n            margin: 20px 0;\n          }\n          .products-table th,\n          .products-table td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: center;\n          }\n          .products-table th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n          }\n          .footer {\n            margin-top: 30px;\n            border-top: 1px solid #ccc;\n            padding-top: 15px;\n            display: flex;\n            justify-content: space-between;\n            font-size: 13px;\n            color: #666;\n          }\n          .total-section {\n            text-align: left;\n            margin-top: 10px;\n          }\n          .total-amount {\n            font-size: 20px;\n            font-weight: bold;\n            border: 2px solid #000;\n            padding: 10px;\n            display: inline-block;\n            background-color: #f9f9f9;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n          }\n        </style>\n      </head>\n      <body>\n        \x3c!-- Header Section --\x3e\n        <div class="header">\n          <div class="company-info">\n            <h1 class="company-name">\u0634\u0631\u0643\u0629 \u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644</h1>\n            <p class="company-subtitle">\u062a\u0635\u0646\u064a\u0639 \u062c\u0645\u064a\u0639 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0623\u0648\u064a\u0644 \u0633\u064a\u0644</p>\n            <p class="company-details">\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0642\u0637\u0627\u0631 \u062d\u062a\u0649 \u0665\u0660\u0660\u0645\u0644</p>\n            <p class="company-details">\u0647\u064a\u062f\u0631\u0648\u0644\u064a\u0643 - \u0646\u064a\u0648\u0645\u0627\u062a\u064a\u0643</p>\n          </div>\n          \n          <div class="logo-section">\n            <img src="https://customer-assets.emergentagent.com/job_oilseal-mgmt/artifacts/42i3e7yn_WhatsApp%20Image%202025-07-31%20at%2015.14.10_e8c55120.jpg" \n                 alt="Master Seal Logo" \n                 style="max-width: 120px; max-height: 80px; margin-bottom: 10px;">\n            <div class="invoice-title">'.concat(e.invoice_title||"\u0639\u0631\u0636 \u0633\u0639\u0631",'</div>\n            <div class="invoice-number">').concat(e.invoice_number,'</div>\n          </div>\n        </div>\n\n        \x3c!-- Customer and Date Info --\x3e\n        <div class="customer-info">\n          <div class="customer-details">\n            <p><strong>\u0627\u0644\u0633\u0627\u062f\u0629:</strong> ').concat(e.customer_name,"</p>\n            <p><strong>\u0627\u0644\u0639\u0646\u0648\u0627\u0646:</strong> ").concat(e.customer_address||"........................",'</p>\n          </div>\n          <div class="date-info">\n            <p><strong>\u062a\u062d\u0631\u064a\u0631 \u0641\u064a:</strong> ').concat(new Date(e.date).toLocaleDateString("ar-EG"),"</p>\n            <p><strong>Date:</strong> ").concat(new Date(e.date).toLocaleDateString("en-GB"),'</p>\n          </div>\n        </div>\n\n        \x3c!-- Products Table --\x3e\n        <table class="products-table">\n          <thead>\n            <tr>\n              <th style="width: 60px;">\u0627\u0644\u0645\u0633\u0644\u0633\u0644<br>Item</th>\n              <th style="width: 80px;">\u0627\u0644\u0643\u0645\u064a\u0629<br>QTY</th>\n              <th style="width: 200px;">Description<br>\u0627\u0644\u0645\u0648\u0627\u0635\u0641\u0627\u062a</th>\n              <th style="width: 100px;">\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629<br>Unit Price</th>\n              <th style="width: 100px;">\u0625\u062c\u0645\u0627\u0644\u064a<br>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(e.items.map(((e,t)=>"\n              <tr>\n                <td>".concat(t+1,"</td>\n                <td>").concat(e.quantity,'</td>\n                <td style="text-align: right;">\n                  ').concat(e.local_product_details?"".concat(e.local_product_details.product_size," - ").concat(e.local_product_details.product_type):"".concat(e.seal_type," - ").concat(e.material_type,"<br>\n                    <small>").concat(e.inner_diameter," \xd7 ").concat(e.outer_diameter," \xd7 ").concat(e.height," \u0645\u0645").concat(e.wall_height?" (\u0627\u0631\u062a\u0641\u0627\u0639 \u0627\u0644\u062d\u064a\u0637\u0629: ".concat(e.wall_height," \u0645\u0645)"):"","</small>"),"\n                </td>\n                <td>\u062c.\u0645 ").concat(e.unit_price.toFixed(2),"</td>\n                <td>\u062c.\u0645 ").concat(e.total_price.toFixed(2),"</td>\n              </tr>\n            "))).join(""),"\n            \x3c!-- Empty rows for additional items --\x3e\n            ").concat(Array.from({length:Math.max(0,8-e.items.length)},((e,t)=>'\n              <tr style="height: 40px;">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n              </tr>\n            ')).join(""),'\n          </tbody>\n        </table>\n\n        \x3c!-- Total Section --\x3e\n        <div class="total-section">\n          <div style="text-align: left; margin-bottom: 10px;">\n            ').concat(e.subtotal?'\n              <div style="margin-bottom: 5px;">\n                <span>\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a: \u062c.\u0645 '.concat(e.subtotal.toFixed(2),"</span>\n              </div>\n            "):"","\n            ").concat(e.discount&&e.discount>0?'\n              <div style="margin-bottom: 5px; color: #d32f2f;">\n                <span>\u0627\u0644\u062e\u0635\u0645: - \u062c.\u0645 '.concat(e.discount.toFixed(2),"</span>\n                ").concat("percentage"===e.discount_type&&e.discount_value?" <small>(".concat(e.discount_value,"%)</small>"):"",'\n              </div>\n              <hr style="margin: 5px 0; border: 1px solid #000;">\n            '):"",'\n          </div>\n          <div class="total-amount">\n            \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0647\u0627\u0626\u064a: \u062c.\u0645 ').concat((e.total_after_discount||e.total_amount).toFixed(2),'\n          </div>\n        </div>\n\n        \x3c!-- Additional Info --\x3e\n        <div style="margin-top: 20px; text-align: center; font-size: 13px;">\n          <p><strong>\u0645\u0644\u062d\u0648\u0638\u0629:</strong> \u0641\u0642\u0637 \u0648\u0642\u062f\u0631\u0647</p>\n          <div style="height: 30px; border-bottom: 1px solid #000; margin: 10px 40px;"></div>\n        </div>\n\n        \x3c!-- Footer --\x3e\n        <div class="footer">\n          <div>\n            <p><strong>\u0627\u0644\u062a\u0648\u0642\u064a\u0639:</strong></p>\n            <p>\u0645\u0648\u0628\u0627\u064a\u0644: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667 - \u0660\u0661\u0660\u0666\u0662\u0663\u0669\u0660\u0668\u0667\u0660</p>\n            <p>\u062a\u0644\u064a\u0641\u0648\u0646: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667</p>\n          </div>\n          <div style="text-align: left;">\n            <p><strong>\u0627\u0644\u0645\u0633\u062a\u0644\u0645:</strong></p>\n            <p>\u0627\u0644\u062d\u0631\u0641\u064a\u064a\u0646 - \u0627\u0644\u0633\u0644\u0627\u0645 - \u0623\u0645\u0627\u0645 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a</p>\n            <p>\u0645\u0648\u0628\u0627\u064a\u0644: \u0660\u0661\u0660\u0662\u0660\u0666\u0663\u0660\u0666\u0667\u0667 - \u0660\u0661\u0660\u0666\u0662\u0663\u0669\u0660\u0668\u0667\u0660</p>\n          </div>\n        </div>\n\n        \x3c!-- Note --\x3e\n        <div style="text-align: center; margin-top: 20px; font-size: 12px; color: #666;">\n          <p>\u064a\u0642\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a \u0628\u0623\u0646\u0647 \u0642\u0627\u0645 \u0628\u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629 \u0648\u0642\u0628\u0648\u0644\u0647\u0627</p>\n        </div>\n      </body>\n      </html>\n    '),n=window.open("","_blank");n.document.write(t),n.document.close(),n.print()})(e),className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"\u0637\u0628\u0627\u0639\u0629"}),(0,Lt.jsx)("button",{onClick:()=>(e=>{u(e.id),m({invoice_title:e.invoice_title||"",supervisor_name:e.supervisor_name||"",customer_name:e.customer_name||"",payment_method:e.payment_method||"\u0646\u0642\u062f\u064a",discount_type:e.discount_type||"amount",discount_value:e.discount_value||0,items:e.items||[],notes:e.notes||""})})(e),className:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629\u061f"))try{await Rt.delete("".concat(Ft,"/invoices/").concat(e)),f(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error deleting invoice:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"}),"\u0627\u0646\u062a\u0638\u0627\u0631"===e.status&&(0,Lt.jsx)("button",{onClick:()=>(async(e,t)=>{try{await Rt.put("".concat(Ft,"/invoices/").concat(e,"/status"),{status:t},{headers:{"Content-Type":"application/json"}}),f(),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}catch(n){console.error("Error updating invoice status:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}})(e.id,"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"),className:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600",children:"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"})]})})]},e.id)}))})]}),0===g.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u062a\u0637\u0627\u0628\u0642 \u0645\u0639\u0627\u064a\u064a\u0631 \u0627\u0644\u0628\u062d\u062b"})]})]}),c&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto",dir:"rtl",children:[(0,Lt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("input",{type:"text",value:p.invoice_title,onChange:e=>m(d(d({},p),{},{invoice_title:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"}),(0,Lt.jsx)("input",{type:"text",value:p.supervisor_name,onChange:e=>m(d(d({},p),{},{supervisor_name:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Lt.jsx)("input",{type:"text",value:p.customer_name,onChange:e=>m(d(d({},p),{},{customer_name:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",required:!0})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Lt.jsxs)("select",{value:p.payment_method,onChange:e=>m(d(d({},p),{},{payment_method:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"\u0646\u0642\u062f\u064a",children:"\u0646\u0642\u062f\u064a"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0627\u0644\u0635\u0627\u0648\u064a",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0627\u0644\u0635\u0627\u0648\u064a"}),(0,Lt.jsx)("option",{value:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644",children:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644"}),(0,Lt.jsx)("option",{value:"\u0622\u062c\u0644",children:"\u0622\u062c\u0644"}),(0,Lt.jsx)("option",{value:"\u0627\u0646\u0633\u062a\u0627 \u0628\u0627\u064a",children:"\u0627\u0646\u0633\u062a\u0627 \u0628\u0627\u064a"}),(0,Lt.jsx)("option",{value:"Yad_Elsawy",children:"Yad Elsawy"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0635\u0645"}),(0,Lt.jsxs)("select",{value:p.discount_type,onChange:e=>m(d(d({},p),{},{discount_type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"amount",children:"\u0645\u0628\u0644\u063a \u062b\u0627\u0628\u062a"}),(0,Lt.jsx)("option",{value:"percentage",children:"\u0646\u0633\u0628\u0629 \u0645\u0626\u0648\u064a\u0629"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645"}),(0,Lt.jsx)("input",{type:"number",step:"0.01",value:p.discount_value,onChange:e=>m(d(d({},p),{},{discount_value:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"percentage"===p.discount_type?"0-100":"0.00"})]})]}),(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Lt.jsx)("textarea",{value:p.notes,onChange:e=>m(d(d({},p),{},{notes:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",rows:"3",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]}),(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("h4",{className:"text-lg font-medium mb-2",children:"\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0633\u0639\u0631 \u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:p.items.map(((e,t)=>{var n,r;return(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:"local"===e.product_type||e.local_product_details?(0,Lt.jsx)("input",{type:"text",value:e.product_name||"".concat((null===(n=e.local_product_details)||void 0===n?void 0:n.product_size)||""," - ").concat((null===(r=e.local_product_details)||void 0===r?void 0:r.product_type)||""),onChange:e=>{const n=[...p.items];n[t].product_name=e.target.value,m(d(d({},p),{},{items:n}))},className:"w-full p-1 border border-gray-300 rounded",placeholder:"\u0645\u0642\u0627\u0633 \u0627\u0644\u0645\u0646\u062a\u062c - \u0646\u0648\u0639 \u0627\u0644\u0645\u0646\u062a\u062c"}):(0,Lt.jsx)("span",{children:"".concat(e.seal_type||""," - ").concat(e.material_type||""," (").concat(e.inner_diameter,"\xd7").concat(e.outer_diameter,"\xd7").concat(e.height,")")})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("input",{type:"number",value:e.quantity,onChange:e=>{const n=[...p.items];n[t].quantity=parseInt(e.target.value)||0,n[t].total_price=n[t].unit_price*n[t].quantity,m(d(d({},p),{},{items:n}))},className:"w-full p-1 border border-gray-300 rounded"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("input",{type:"number",step:"0.01",value:e.unit_price,onChange:e=>{const n=[...p.items];n[t].unit_price=parseFloat(e.target.value)||0,n[t].total_price=n[t].unit_price*n[t].quantity,m(d(d({},p),{},{items:n}))},className:"w-full p-1 border border-gray-300 rounded"})}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2 font-semibold",children:["\u062c.\u0645 ",(e.total_price||0).toFixed(2)]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("button",{onClick:()=>{const e=p.items.filter(((e,n)=>n!==t));m(d(d({},p),{},{items:e}))},className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"\u062d\u0630\u0641"})})]},t)}))})]})}),(0,Lt.jsx)("button",{onClick:()=>{m(d(d({},p),{},{items:[...p.items,{seal_type:"",material_type:"",inner_diameter:"",outer_diameter:"",height:"",quantity:1,unit_price:0,total_price:0}]}))},className:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f"})]}),(0,Lt.jsxs)("div",{className:"flex justify-end space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:b,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Lt.jsx)("button",{onClick:async()=>{if(p.customer_name.trim())try{const e=p.items.reduce(((e,t)=>e+(t.total_price||0)),0);let t=0;t="percentage"===p.discount_type?e*parseFloat(p.discount_value||0)/100:parseFloat(p.discount_value||0);const n=e-t,r=d(d({},p),{},{subtotal:e,discount:t,total_after_discount:n,total_amount:n});await Rt.put("".concat(Ft,"/invoices/").concat(c),r),f(),b(),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d")}catch(n){var e,t;console.error("Error updating invoice:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644")},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"})]})]})})]})},Gt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[s,i]=(0,a.useState)({title:"",description:"",priority:"\u0639\u0627\u062f\u064a"}),[c,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(""),[f,h]=(0,a.useState)("");(0,a.useEffect)((()=>{b(),g()}),[]);const b=async()=>{try{const e=await Rt.get("".concat(Ft,"/work-orders"));t(e.data)}catch(e){console.error("Error fetching work orders:",e),t([])}},g=async()=>{try{const e=await Rt.get("".concat(Ft,"/invoices"));r(e.data)}catch(e){console.error("Error fetching invoices:",e)}},x=()=>n.filter((e=>"\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"===e.status||"\u0627\u0646\u062a\u0638\u0627\u0631"===e.status));return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0623\u0645\u0631 \u0634\u063a\u0644"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0634\u063a\u0644\u061f \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647."))try{await Rt.delete("".concat(Ft,"/work-orders/clear-all")),b(),alert("\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0634\u063a\u0644")}catch(e){console.error("Error clearing work orders:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{onClick:()=>{b(),g()},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),(0,Lt.jsx)("button",{onClick:()=>u(!c),className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600",children:c?"\u0625\u062e\u0641\u0627\u0621":"\u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0644\u0623\u0645\u0631 \u0645\u0648\u062c\u0648\u062f"}),(0,Lt.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-2",children:[(0,Lt.jsx)("option",{children:"\u064a\u0648\u0645\u064a"}),(0,Lt.jsx)("option",{children:"\u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Lt.jsx)("option",{children:"\u0634\u0647\u0631\u064a"}),(0,Lt.jsx)("option",{children:"\u0633\u0646\u0648\u064a"})]})]})]}),c&&(0,Lt.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg shadow-md mb-6 border border-yellow-200",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-yellow-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0625\u0644\u0649 \u0623\u0645\u0631 \u0634\u063a\u0644 \u0645\u0648\u062c\u0648\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644"}),(0,Lt.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644"}),e.map((e=>{var t;return(0,Lt.jsxs)("option",{value:e.id,children:[e.title||"\u0623\u0645\u0631 \u0634\u063a\u0644 #".concat(e.id.slice(-8)),"(",(null===(t=e.invoices)||void 0===t?void 0:t.length)||0," \u0641\u0627\u062a\u0648\u0631\u0629)"]},e.id)}))]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsxs)("select",{value:f,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded",disabled:!p,children:[(0,Lt.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(()=>{var t;if(!p)return x();const n=e.find((e=>e.id===p));if(!n)return x();const r=(null===(t=n.invoices)||void 0===t?void 0:t.map((e=>e.id)))||[];return x().filter((e=>!r.includes(e.id)))})().map((e=>{var t;return(0,Lt.jsxs)("option",{value:e.id,children:[e.invoice_number," - ",e.customer_name,"(\u062c.\u0645 ",(null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2))||"0.00",")"]},e.id)}))]})]})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(p&&f)try{(await Rt.put("".concat(Ft,"/work-orders/").concat(p,"/add-invoice"),null,{params:{invoice_id:f}})).data&&(alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0625\u0644\u0649 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 \u0628\u0646\u062c\u0627\u062d"),m(""),h(""),u(!1),await b())}catch(n){var e,t;console.error("Error adding invoice to work order:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 \u0648\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")},className:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600",disabled:!p||!f,children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("button",{onClick:()=>{u(!1),m(""),h("")},className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0631 \u0634\u063a\u0644 \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0639\u0646\u0648\u0627\u0646 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 *"}),(0,Lt.jsx)("input",{type:"text",value:s.title,onChange:e=>i(d(d({},s),{},{title:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u062b\u0627\u0644: \u0623\u0645\u0631 \u0634\u063a\u0644 \u0631\u0642\u0645 1 - \u064a\u0646\u0627\u064a\u0631 2025"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,Lt.jsxs)("select",{value:s.priority,onChange:e=>i(d(d({},s),{},{priority:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"\u0639\u0627\u062f\u064a",children:"\u0639\u0627\u062f\u064a"}),(0,Lt.jsx)("option",{value:"\u0645\u0647\u0645",children:"\u0645\u0647\u0645"}),(0,Lt.jsx)("option",{value:"\u0637\u0627\u0631\u0626",children:"\u0637\u0627\u0631\u0626"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u062e\u062a\u0627\u0631\u0629"}),(0,Lt.jsxs)("div",{className:"p-2 bg-gray-100 rounded",children:[l.length," \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u062d\u062f\u062f\u0629"]})]})]}),(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0648\u0635\u0641 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644"}),(0,Lt.jsx)("textarea",{value:s.description,onChange:e=>i(d(d({},s),{},{description:e.target.value})),className:"w-full p-2 border border-gray-300 rounded h-20",placeholder:"\u0648\u0635\u0641 \u0625\u0636\u0627\u0641\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]}),(0,Lt.jsx)("h4",{className:"font-medium mb-2",children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631:"}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4 max-h-60 overflow-y-auto border rounded p-4",children:x().map((e=>{var t,n;return(0,Lt.jsxs)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat(l.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"),onClick:()=>{return t=e.id,void o((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},children:[(0,Lt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Lt.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>{},className:"ml-2"}),(0,Lt.jsx)("h5",{className:"font-semibold",children:e.invoice_number})]}),(0,Lt.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0627\u0644\u0639\u0645\u064a\u0644: ",e.customer_name]}),(0,Lt.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e: ",new Date(e.date).toLocaleDateString("ar-EG")]}),(0,Lt.jsxs)("p",{className:"text-sm font-medium",children:["\u0627\u0644\u0645\u0628\u0644\u063a: \u062c.\u0645 ",(null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Lt.jsxs)("p",{className:"text-sm",children:["\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a: ",(null===(n=e.items)||void 0===n?void 0:n.length)||0," \u0635\u0646\u0641"]}),(0,Lt.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs mt-1 ".concat("\u062a\u0645 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.status})]},e.id)}))}),0===x().length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u062a\u0627\u062d\u0629 \u0644\u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0631 \u0634\u063a\u0644"}),l.length>0&&(0,Lt.jsxs)("div",{className:"mb-4 p-3 bg-blue-100 rounded",children:[(0,Lt.jsx)("h5",{className:"font-semibold text-blue-800",children:"\u0645\u0644\u062e\u0635 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644:"}),(0,Lt.jsxs)("p",{className:"text-blue-700",children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631: ",l.length," \u0641\u0627\u062a\u0648\u0631\u0629"]}),(0,Lt.jsxs)("p",{className:"text-blue-700",children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a: \u062c.\u0645 ",n.filter((e=>l.includes(e.id))).reduce(((e,t)=>e+(t.total_amount||0)),0).toFixed(2)]}),(0,Lt.jsxs)("p",{className:"text-blue-700",children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a: ",n.filter((e=>l.includes(e.id))).reduce(((e,t)=>{var n;return e+((null===(n=t.items)||void 0===n?void 0:n.length)||0)}),0)," \u0635\u0646\u0641"]})]}),(0,Lt.jsxs)("button",{onClick:async()=>{if(0!==l.length)if(s.title.trim())try{const e=n.filter((e=>l.includes(e.id))).map((e=>{const t=d({},e);return t._id&&delete t._id,t})),t={title:s.title,description:s.description,priority:s.priority,invoices:e,total_amount:e.reduce(((e,t)=>e+(t.total_amount||0)),0),total_items:e.reduce(((e,t)=>{var n;return e+((null===(n=t.items)||void 0===n?void 0:n.length)||0)}),0)};(await Rt.post("".concat(Ft,"/work-orders/multiple"),t)).data&&(alert("\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 \u0628\u0646\u062c\u0627\u062d"),o([]),i({title:"",description:"",priority:"\u0639\u0627\u062f\u064a"}),await b())}catch(r){var e,t;console.error("Error creating work order:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644: "+((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||r.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0639\u0646\u0648\u0627\u0646 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644");else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0641\u0627\u062a\u0648\u0631\u0629 \u0648\u0627\u062d\u062f\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644")},className:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600",disabled:0===l.length,children:["\u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 (",l.length," \u0641\u0627\u062a\u0648\u0631\u0629)"]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 (",e.length,")"]}),e.map((e=>{var t;const r=e.invoices||(e.invoice_id?[(a=e.invoice_id,n.find((e=>e.id===a)))]:[]);var a;return(0,Lt.jsxs)("div",{className:"border rounded-lg p-4 mb-4",children:[(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"font-semibold text-lg",children:e.title||"\u0623\u0645\u0631 \u0634\u063a\u0644 #".concat(e.id.slice(-8))}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629:"}),(0,Lt.jsx)("span",{className:"mr-2 px-2 py-1 rounded text-sm ".concat("\u0637\u0627\u0631\u0626"===e.priority?"bg-red-100 text-red-800":"\u0645\u0647\u0645"===e.priority?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.priority||"\u0639\u0627\u062f\u064a"})]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"})," ",new Date(e.created_at).toLocaleDateString("ar-EG")]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631:"})," ",r.filter((e=>e)).length]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Lt.jsx)("span",{className:"mr-2 px-2 py-1 rounded text-sm bg-blue-100 text-blue-800",children:e.status||"\u062c\u062f\u064a\u062f"})]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a:"}),"\u062c.\u0645 ",(null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2))||r.reduce(((e,t)=>e+((null===t||void 0===t?void 0:t.total_amount)||0)),0).toFixed(2)]}),e.description&&(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0648\u0635\u0641:"})," ",e.description]}),e.supervisor_name&&(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0645\u0634\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u062a\u0635\u0646\u064a\u0639:"})," ",e.supervisor_name]}),e.is_daily&&(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0646\u0648\u0639 \u0627\u0644\u0623\u0645\u0631:"})," ",(0,Lt.jsx)("span",{className:"text-green-600",children:"\u0623\u0645\u0631 \u0634\u063a\u0644 \u064a\u0648\u0645\u064a \u062a\u0644\u0642\u0627\u0626\u064a"})]})]})]}),(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("h5",{className:"font-medium mb-2",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u062f\u0631\u062c\u0629:"}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.filter((e=>e)).map(((e,t)=>{var n,r;return(0,Lt.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"})," ",e.invoice_number]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0639\u0645\u064a\u0644:"})," ",e.customer_name]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0645\u0628\u0644\u063a:"})," \u062c.\u0645 ",(null===(n=e.total_amount)||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(0,Lt.jsxs)("p",{children:[(0,Lt.jsx)("strong",{children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a:"})," ",(null===(r=e.items)||void 0===r?void 0:r.length)||0," \u0635\u0646\u0641"]})]},t)}))})]}),(0,Lt.jsxs)("div",{className:"overflow-x-auto mb-4",children:[(0,Lt.jsx)("h5",{className:"font-medium mb-2",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a:"}),(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0642\u0627\u0633"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062e\u0627\u0645\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629"})]})}),(0,Lt.jsx)("tbody",{children:r.filter((e=>e)).map((e=>{var t;return(null===(t=e.items)||void 0===t?void 0:t.map(((t,n)=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.invoice_number}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:t.seal_type}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:t.material_type}),(0,Lt.jsxs)("td",{className:"border border-gray-300 p-2",children:[t.inner_diameter," \xd7 ",t.outer_diameter," \xd7 ",t.height]}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:t.quantity}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:t.material_details?t.material_details.is_finished_product?(0,Lt.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:"\u0645\u0646\u062a\u062c \u062c\u0627\u0647\u0632"}):(0,Lt.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",children:t.material_details.material_type}):(0,Lt.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",children:t.material_used||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("div",{className:"font-mono text-sm",children:t.material_details?t.material_details.is_finished_product?(0,Lt.jsx)("div",{className:"text-center font-semibold text-blue-600",children:"\u0645\u062e\u0632\u0646 \u0627\u0646\u062a\u0627\u062c \u062a\u0627\u0645"}):(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("div",{className:"font-semibold",children:t.material_details.unit_code}),(0,Lt.jsxs)("div",{className:"text-xs text-gray-600",children:[t.material_details.inner_diameter," - ",t.material_details.outer_diameter]})]}):(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("div",{className:"font-semibold",children:t.material_used||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Lt.jsx)("div",{className:"text-xs text-gray-600",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062e\u0627\u0645\u0629 \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629"})]})})})]},"".concat(e.id,"-").concat(n)))))||[]}))})]})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:()=>(e=>{var t;const r=(null===(t=e.invoices)||void 0===t?void 0:t.map((e=>n.find((t=>t.id===e.id))||e)).filter((e=>e)))||[],a=r.reduce(((e,t)=>e+(t.total_amount||0)),0),l=(r.reduce(((e,t)=>{var n;return e+((null===(n=t.items)||void 0===n?void 0:n.length)||0)}),0),'\n      <div style="font-family: Arial, sans-serif; direction: rtl; text-align: right;">\n        <div style="text-align: center; margin-bottom: 20px;">\n          <h1>\u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644</h1>\n          <p>\u0627\u0644\u062d\u0631\u0641\u064a\u0627\u0646 \u0634\u0627\u0631\u0639 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a - 01020630677</p>\n          <h2 style="color: #333; margin-top: 20px;">\u0623\u0645\u0631 \u0634\u063a\u0644</h2>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <strong>\u0631\u0642\u0645 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644:</strong> '.concat(e.id,"<br>\n          <strong>\u0627\u0644\u0639\u0646\u0648\u0627\u0646:</strong> ").concat(e.title||"\u0623\u0645\u0631 \u0634\u063a\u0644 #".concat(e.id.slice(-8)),"<br>\n          <strong>\u0627\u0644\u062a\u0627\u0631\u064a\u062e:</strong> ").concat(new Date(e.created_at).toLocaleDateString("ar-EG"),"<br>\n          <strong>\u0627\u0644\u062d\u0627\u0644\u0629:</strong> ").concat(e.status||"\u062c\u062f\u064a\u062f","<br>\n          <strong>\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631:</strong> ").concat(r.length,"<br>\n          <strong>\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a:</strong> \u062c.\u0645 ").concat(a.toFixed(2),"\n          ").concat(e.description?"<br><strong>\u0627\u0644\u0648\u0635\u0641:</strong> ".concat(e.description):"","\n          ").concat(e.supervisor_name?"<br><strong>\u0627\u0644\u0645\u0634\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u062a\u0635\u0646\u064a\u0639:</strong> ".concat(e.supervisor_name):"","\n          ").concat(e.is_daily?"<br><strong>\u0646\u0648\u0639 \u0627\u0644\u0623\u0645\u0631:</strong> \u0623\u0645\u0631 \u0634\u063a\u0644 \u064a\u0648\u0645\u064a \u062a\u0644\u0642\u0627\u0626\u064a":"",'\n        </div>\n\n        <h3 style="color: #333; margin-bottom: 10px;">\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u062f\u0631\u062c\u0629:</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #f0f0f0;">\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u0639\u0645\u064a\u0644</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u062a\u0627\u0631\u064a\u062e</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u0645\u0628\u0644\u063a</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(r.map((e=>{var t,n;return'\n              <tr>\n                <td style="border: 1px solid #ddd; padding: 8px;">'.concat(e.invoice_number,'</td>\n                <td style="border: 1px solid #ddd; padding: 8px;">').concat(e.customer_name,'</td>\n                <td style="border: 1px solid #ddd; padding: 8px;">').concat(new Date(e.date).toLocaleDateString("ar-EG"),'</td>\n                <td style="border: 1px solid #ddd; padding: 8px;">\u062c.\u0645 ').concat((null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2))||"0.00",'</td>\n                <td style="border: 1px solid #ddd; padding: 8px;">').concat((null===(n=e.items)||void 0===n?void 0:n.length)||0,"</td>\n              </tr>\n            ")})).join(""),'\n          </tbody>\n        </table>\n\n        <h3 style="color: #333; margin-bottom: 10px;">\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a:</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #f0f0f0;">\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0646\u0648\u0639 \u0627\u0644\u0633\u064a\u0644</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0645\u0629</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u0645\u0642\u0627\u0633</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u0643\u0645\u064a\u0629</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0627\u0644\u062e\u0627\u0645\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629</th>\n              <th style="border: 1px solid #ddd; padding: 8px;">\u0643\u0648\u062f \u0627\u0644\u0648\u062d\u062f\u0629</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(r.map((e=>{var t;return(null===(t=e.items)||void 0===t?void 0:t.map((t=>'\n                <tr>\n                  <td style="border: 1px solid #ddd; padding: 8px;">'.concat(e.invoice_number,'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.local_product_details?t.local_product_details.product_type:t.seal_type||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.local_product_details?"\u0645\u062d\u0644\u064a":t.material_type||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.local_product_details?"".concat(t.local_product_details.product_size," - ").concat(t.local_product_details.product_type):t.inner_diameter&&t.outer_diameter&&t.height?"".concat(t.inner_diameter," \xd7 ").concat(t.outer_diameter," \xd7 ").concat(t.height):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.quantity,'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">').concat(t.local_product_details?"\u0645\u062d\u0644\u064a":t.material_used||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",'</td>\n                  <td style="border: 1px solid #ddd; padding: 8px;">\n                    ').concat(t.local_product_details?"\u0645\u062d\u0644\u064a":t.material_details?t.material_details.is_finished_product?"\u0645\u062e\u0632\u0646 \u0627\u0646\u062a\u0627\u062c \u062a\u0627\u0645":"".concat(t.material_details.unit_code," / ").concat(t.material_details.inner_diameter,"-").concat(t.material_details.outer_diameter):"".concat(t.material_used||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"," / \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629"),"\n                  </td>\n                </tr>\n              "))).join(""))||""})).join(""),'\n          </tbody>\n        </table>\n        \n        <div style="margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;">\n          <div style="float: left;">\n            <strong>\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0627\u0644\u062a\u0635\u0646\u064a\u0639:</strong><br>\n            <div style="margin-top: 10px; height: 50px; border: 1px solid #ddd;"></div>\n          </div>\n          <div style="float: right;">\n            <strong>\u062a\u0648\u0642\u064a\u0639 \u0627\u0644\u0645\u0633\u0624\u0648\u0644:</strong><br>\n            <div style="margin-top: 10px; height: 50px; border: 1px solid #ddd; width: 150px;"></div>\n          </div>\n          <div style="clear: both;"></div>\n        </div>\n      </div>\n    ')),o=window.open("","_blank");o.document.write(l),o.document.close(),o.print()})(e),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644"}),(0,Lt.jsx)("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsx)("button",{onClick:()=>{m(e.id),u(!0)},className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 \u0647\u0630\u0627\u061f"))try{await Rt.delete("".concat(Ft,"/work-orders/").concat(e)),b(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error deleting work order:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0623\u0645\u0631 \u0627\u0644\u0634\u063a\u0644")}})(e.id),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641"})]})]},e.id)})),0===e.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0648\u0627\u0645\u0631 \u0634\u063a\u0644"})]})]})},Xt=()=>{const{user:e}=At(),[t,n]=(0,a.useState)([{id:"cash",name:"\u0646\u0642\u062f\u064a",balance:0,transactions:[]},{id:"vodafone_elsawy",name:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a",balance:0,transactions:[]},{id:"vodafone_wael",name:"\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f",balance:0,transactions:[]},{id:"deferred",name:"\u0622\u062c\u0644",balance:0,transactions:[]},{id:"instapay",name:"\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a",balance:0,transactions:[]},{id:"yad_elsawy",name:"\u064a\u062f \u0627\u0644\u0635\u0627\u0648\u064a",balance:0,transactions:[]}]),[r,l]=(0,a.useState)("cash"),[o,s]=(0,a.useState)(!1),[i,c]=(0,a.useState)({from:"cash",to:"vodafone_elsawy",amount:"",notes:""}),[u,p]=(0,a.useState)({account:"cash",type:"income",amount:"",description:"",notes:""}),[m,f]=(0,a.useState)(!1),[h,b]=(0,a.useState)("");(0,a.useEffect)((()=>{g()}),[]);const g=async()=>{try{const e=await Rt.get("".concat(Ft,"/treasury/balances")),r=await Rt.get("".concat(Ft,"/treasury/transactions")),a=await Rt.get("".concat(Ft,"/invoices")),l=await Rt.get("".concat(Ft,"/expenses")),o=e.data,s=r.data,i=a.data,c=l.data,u=t.map((e=>{let t=[];return i.forEach((n=>{({"\u0646\u0642\u062f\u064a":"cash","\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0645\u062d\u0645\u062f \u0627\u0644\u0635\u0627\u0648\u064a":"vodafone_elsawy","\u0641\u0648\u062f\u0627\u0641\u0648\u0646 \u0643\u0627\u0634 \u0648\u0627\u0626\u0644 \u0645\u062d\u0645\u062f":"vodafone_wael","\u0622\u062c\u0644":"deferred","\u0627\u0646\u0633\u062a\u0627\u0628\u0627\u064a":"instapay","\u064a\u062f \u0627\u0644\u0635\u0627\u0648\u064a":"yad_elsawy"})[n.payment_method]===e.id&&t.push({id:"inv-".concat(n.id),type:"income",amount:n.total_amount||0,description:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(n.invoice_number),date:n.date,reference:"\u0627\u0644\u0639\u0645\u064a\u0644: ".concat(n.customer_name)})})),"cash"===e.id&&c.forEach((e=>{t.push({id:"exp-".concat(e.id),type:"expense",amount:e.amount||0,description:e.description||"\u0645\u0635\u0631\u0648\u0641",date:e.date,category:e.category})})),s.filter((t=>t.account_id===e.id)).forEach((e=>{t.push({id:e.id,type:e.transaction_type,amount:e.amount,description:e.description,date:e.date,reference:e.reference})})),d(d({},e),{},{balance:o[e.id]||0,transactions:t.sort(((e,t)=>new Date(t.date)-new Date(e.date)))})}));n(u)}catch(e){console.error("Error fetching treasury data:",e)}},x=t.find((e=>e.id===r));return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629 - \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0645\u0648\u0627\u0644"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{onClick:()=>s(!0),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u062a\u062d\u0648\u064a\u0644 \u0623\u0645\u0648\u0627\u0644"}),(0,Lt.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u0644\u064a\u0629 \u064a\u062f\u0648\u064a\u0629"}),(0,Lt.jsx)("button",{onClick:g,className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"}),"Elsawy"===(null===e||void 0===e?void 0:e.username)&&"yad_elsawy"===r&&(null===x||void 0===x?void 0:x.balance)>0&&(0,Lt.jsx)("button",{onClick:()=>(async e=>{if(!confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062a\u0635\u0641\u064a\u0631 \u0647\u0630\u0627 \u0627\u0644\u062d\u0633\u0627\u0628\u061f \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647."))return;const n=t.find((t=>t.id===e));if(n&&0!==n.balance)try{await Rt.post("".concat(Ft,"/treasury/transactions"),{account_id:e,transaction_type:"expense",amount:n.balance,description:"\u062a\u0635\u0641\u064a\u0631 \u062d\u0633\u0627\u0628 ".concat(n.name),reference:"\u062a\u0635\u0641\u064a\u0631 \u0628\u0648\u0627\u0633\u0637\u0629 \u0627\u0644\u0645\u062f\u064a\u0631"}),g(),alert("\u062a\u0645 \u062a\u0635\u0641\u064a\u0631 \u062d\u0633\u0627\u0628 ".concat(n.name," \u0628\u0646\u062c\u0627\u062d"))}catch(r){console.error("Error clearing account:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u0641\u064a\u0631 \u0627\u0644\u062d\u0633\u0627\u0628")}else alert("\u0627\u0644\u062d\u0633\u0627\u0628 \u0641\u0627\u0631\u063a \u0628\u0627\u0644\u0641\u0639\u0644 \u0623\u0648 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f")})(r),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062a\u0635\u0641\u064a\u0631 \u062d\u0633\u0627\u0628 \u064a\u062f \u0627\u0644\u0635\u0627\u0648\u064a"})]})]}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6",children:t.map((e=>(0,Lt.jsxs)("div",{className:"p-4 rounded-lg shadow cursor-pointer transition-colors ".concat(r===e.id?"bg-blue-100 border-2 border-blue-500":"bg-white hover:bg-gray-50"),onClick:()=>l(e.id),children:[(0,Lt.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,Lt.jsxs)("p",{className:"text-2xl font-bold ".concat(e.balance>=0?"text-green-600":"text-red-600"),children:["\u062c.\u0645 ",e.balance.toFixed(2)]}),(0,Lt.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.transactions.length," \u0639\u0645\u0644\u064a\u0629"]})]},e.id)))}),x&&(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u062d\u0633\u0627\u0628: ",x.name]}),(0,Lt.jsx)("div",{className:"mb-4",children:(0,Lt.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a...",className:"w-full p-3 border border-gray-300 rounded-lg"})}),(0,Lt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0645\u0631\u062c\u0639"})]})}),(0,Lt.jsx)("tbody",{children:x.transactions.filter((e=>e.description.toLowerCase().includes(h.toLowerCase())||e.reference&&e.reference.toLowerCase().includes(h.toLowerCase())||e.category&&e.category.toLowerCase().includes(h.toLowerCase()))).map(((e,t)=>(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("income"===e.type?"bg-green-100 text-green-800":"expense"===e.type?"bg-red-100 text-red-800":"transfer_in"===e.type?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"),children:"income"===e.type?"\u062f\u062e\u0644":"expense"===e.type?"\u0645\u0635\u0631\u0648\u0641":"transfer_in"===e.type?"\u062a\u062d\u0648\u064a\u0644 \u0648\u0627\u0631\u062f":"\u062a\u062d\u0648\u064a\u0644 \u0635\u0627\u062f\u0631"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:e.description}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("span",{className:"income"===e.type||"transfer_in"===e.type?"text-green-600 font-semibold":"text-red-600 font-semibold",children:["income"===e.type||"transfer_in"===e.type?"+":"-","\u062c.\u0645 ",e.amount.toFixed(2)]})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2 text-sm text-gray-600",children:e.reference||e.category||"-"})]},e.id||t)))})]}),0===x.transactions.length&&(0,Lt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0639\u0645\u0644\u064a\u0627\u062a \u0644\u0647\u0630\u0627 \u0627\u0644\u062d\u0633\u0627\u0628"})]})]}),o&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u062a\u062d\u0648\u064a\u0644 \u0623\u0645\u0648\u0627\u0644 \u0628\u064a\u0646 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"}),(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0646 \u062d\u0633\u0627\u0628"}),(0,Lt.jsx)("select",{value:i.from,onChange:e=>c(d(d({},i),{},{from:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:t.map((e=>(0,Lt.jsxs)("option",{value:e.id,children:[e.name," (\u062c.\u0645 ",e.balance.toFixed(2),")"]},e.id)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0625\u0644\u0649 \u062d\u0633\u0627\u0628"}),(0,Lt.jsx)("select",{value:i.to,onChange:e=>c(d(d({},i),{},{to:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:t.filter((e=>e.id!==i.from)).map((e=>(0,Lt.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("input",{type:"number",value:i.amount,onChange:e=>c(d(d({},i),{},{amount:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"0.00",min:"0",step:"0.01"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Lt.jsx)("input",{type:"text",value:i.notes,onChange:e=>c(d(d({},i),{},{notes:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mt-6",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(!i.amount||parseFloat(i.amount)<=0)return void alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d");const e=parseFloat(i.amount);if(t.find((e=>e.id===i.from)).balance<e)alert("\u0627\u0644\u0631\u0635\u064a\u062f \u063a\u064a\u0631 \u0643\u0627\u0641\u064a");else try{await Rt.post("".concat(Ft,"/treasury/transfer"),{from_account:i.from,to_account:i.to,amount:e,notes:i.notes}),g(),s(!1),c({from:"cash",to:"vodafone_elsawy",amount:"",notes:""}),alert("\u062a\u0645 \u0627\u0644\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u062c\u0627\u062d")}catch(n){console.error("Error processing transfer:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0648\u064a\u0644")}},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062a\u062d\u0648\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>s(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),m&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u0644\u064a\u0629 \u064a\u062f\u0648\u064a\u0629"}),(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Lt.jsx)("select",{value:u.account,onChange:e=>p(d(d({},u),{},{account:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:t.map((e=>(0,Lt.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"}),(0,Lt.jsxs)("select",{value:u.type,onChange:e=>p(d(d({},u),{},{type:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"income",children:"\u062f\u062e\u0644"}),(0,Lt.jsx)("option",{value:"expense",children:"\u0645\u0635\u0631\u0648\u0641"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Lt.jsx)("input",{type:"number",value:u.amount,onChange:e=>p(d(d({},u),{},{amount:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"0.00",min:"0",step:"0.01"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Lt.jsx)("input",{type:"text",value:u.description,onChange:e=>p(d(d({},u),{},{description:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0648\u0635\u0641 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Lt.jsx)("input",{type:"text",value:u.notes,onChange:e=>p(d(d({},u),{},{notes:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]})]}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mt-6",children:[(0,Lt.jsx)("button",{onClick:async()=>{if(!u.amount||parseFloat(u.amount)<=0)return void alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d");const e=parseFloat(u.amount);try{await Rt.post("".concat(Ft,"/treasury/transactions"),{account_id:u.account,transaction_type:u.type,amount:e,description:u.description,reference:u.notes||"\u0625\u062f\u062e\u0627\u0644 \u064a\u062f\u0648\u064a"}),g(),f(!1),p({account:"cash",type:"income",amount:"",description:"",notes:""}),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error processing manual transaction:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u0644\u064a\u0629")}},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"}),(0,Lt.jsx)("button",{onClick:()=>f(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},Yt=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)({username:"",password:"",role:"user"}),[l,o]=(0,a.useState)(null),[s,i]=(0,a.useState)({username:"",password:"",role:"user"}),[c,u]=(0,a.useState)({name:"\u0645\u0627\u0633\u062a\u0631 \u0633\u064a\u0644",address:"\u0627\u0644\u062d\u0631\u0641\u064a\u0627\u0646 \u0634\u0627\u0631\u0639 \u0627\u0644\u0633\u0648\u0628\u0631 \u062c\u064a\u062a",phone:"01020630677"}),[p,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)(null),b=[{key:"dashboard",label:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"},{key:"sales",label:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"},{key:"inventory",label:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646"},{key:"deferred",label:"\u0627\u0644\u0622\u062c\u0644"},{key:"expenses",label:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"},{key:"revenue",label:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"},{key:"treasury",label:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629"},{key:"invoices",label:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"},{key:"work-orders",label:"\u0623\u0645\u0631 \u0634\u063a\u0644"},{key:"users",label:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}];(0,a.useEffect)((()=>{g()}),[]);const g=async()=>{try{const e=(await Rt.get("".concat(Ft,"/users"))).data||[],n=e.some((e=>"Elsawy"===e.username)),r=e.some((e=>"Root"===e.username));if(n||await Rt.post("".concat(Ft,"/users"),{username:"Elsawy",password:"100100",role:"admin",permissions:b.map((e=>e.key))}),r||await Rt.post("".concat(Ft,"/users"),{username:"Root",password:"master",role:"user",permissions:["dashboard","sales","inventory","deferred","expenses","treasury","work-orders"]}),n&&r)t(e);else{const e=await Rt.get("".concat(Ft,"/users"));t(e.data||[])}}catch(e){console.error("Error fetching users:",e),t([])}},x=()=>{o(null),i({username:"",password:"",role:"user"})},y=async()=>{if(s.username)if(e.some((e=>e.username===s.username&&e.id!==l)))alert("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0648\u062c\u0648\u062f \u0628\u0627\u0644\u0641\u0639\u0644");else try{const t=e.find((e=>e.id===l));if(!t)return void alert("\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const n={id:l,username:s.username,role:s.role,password:s.password||t.password,permissions:t.permissions||[],created_at:t.created_at};await Rt.put("".concat(Ft,"/users/").concat(l),n),g(),o(null),i({username:"",password:"",role:"user"}),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(r){var t,n;console.error("Error updating user:",r),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")};return(0,Lt.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,Lt.jsxs)("div",{className:"mb-6",children:[(0,Lt.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse mb-4",children:[(0,Lt.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"}),(0,Lt.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>window.print(),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u0637\u0628\u0627\u0639\u0629 \u062a\u0642\u0631\u064a\u0631"})]})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"}),p?(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629"}),(0,Lt.jsx)("input",{type:"text",value:c.name,onChange:e=>u(d(d({},c),{},{name:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Lt.jsx)("input",{type:"text",value:c.address,onChange:e=>u(d(d({},c),{},{address:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646"}),(0,Lt.jsx)("input",{type:"text",value:c.phone,onChange:e=>u(d(d({},c),{},{phone:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]})]}):(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629"}),(0,Lt.jsx)("p",{className:"p-2 bg-gray-100 rounded",children:c.name})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Lt.jsx)("p",{className:"p-2 bg-gray-100 rounded",children:c.address})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646"}),(0,Lt.jsx)("p",{className:"p-2 bg-gray-100 rounded",children:c.phone})]})]}),(0,Lt.jsx)("div",{className:"flex space-x-4 space-x-reverse",children:p?(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:()=>{m(!1),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0646\u062c\u0627\u062d")},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u062d\u0641\u0638"}),(0,Lt.jsx)("button",{onClick:()=>m(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]}):(0,Lt.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"})})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Lt.jsx)("input",{type:"text",value:n.username,onChange:e=>r(d(d({},n),{},{username:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,Lt.jsx)("input",{type:"password",value:n.password,onChange:e=>r(d(d({},n),{},{password:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,Lt.jsxs)("select",{value:n.role,onChange:e=>r(d(d({},n),{},{role:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"user",children:"\u0645\u0633\u062a\u062e\u062f\u0645 \u0639\u0627\u062f\u064a"}),(0,Lt.jsx)("option",{value:"admin",children:"\u0645\u062f\u064a\u0631"})]})]})]}),(0,Lt.jsx)("button",{onClick:async()=>{if(n.username&&n.password)try{if(e.some((e=>e.username===n.username)))return void alert("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0648\u062c\u0648\u062f \u0628\u0627\u0644\u0641\u0639\u0644");const t="admin"===n.role?b.map((e=>e.key)):["dashboard","sales","inventory","deferred","expenses","treasury","work-orders"],a={username:n.username,password:n.password,role:n.role,permissions:t};await Rt.post("".concat(Ft,"/users"),a),g(),r({username:"",password:"",role:"user"}),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(l){var t,a;console.error("Error adding user:",l),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: "+((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||l.message))}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631")},className:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"})]}),(0,Lt.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,Lt.jsx)("div",{className:"overflow-x-auto",children:(0,Lt.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,Lt.jsx)("thead",{children:(0,Lt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0639\u062f\u062f \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0634\u0627\u0621"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Lt.jsx)("th",{className:"border border-gray-300 p-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Lt.jsx)("tbody",{children:e.map((t=>{var n;return(0,Lt.jsxs)("tr",{children:[(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:l===t.id?(0,Lt.jsx)("input",{type:"text",value:s.username,onChange:e=>i(d(d({},s),{},{username:e.target.value})),className:"w-full p-1 border border-gray-300 rounded"}):(0,Lt.jsx)("span",{className:"font-semibold",children:t.username})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:l===t.id?(0,Lt.jsxs)("select",{value:s.role,onChange:e=>i(d(d({},s),{},{role:e.target.value})),className:"w-full p-1 border border-gray-300 rounded",children:[(0,Lt.jsx)("option",{value:"user",children:"\u0645\u0633\u062a\u062e\u062f\u0645 \u0639\u0627\u062f\u064a"}),(0,Lt.jsx)("option",{value:"admin",children:"\u0645\u062f\u064a\u0631"})]}):(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("admin"===t.role?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:"admin"===t.role?"\u0645\u062f\u064a\u0631":"\u0645\u0633\u062a\u062e\u062f\u0645 \u0639\u0627\u062f\u064a"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:[(null===(n=t.permissions)||void 0===n?void 0:n.length)||0," \u0635\u0644\u0627\u062d\u064a\u0629"]})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:new Date(t.created_at).toLocaleDateString("ar-EG")}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-green-100 text-green-800",children:"\u0646\u0634\u0637"})}),(0,Lt.jsx)("td",{className:"border border-gray-300 p-2",children:(0,Lt.jsx)("div",{className:"flex space-x-2 space-x-reverse flex-wrap",children:l===t.id?(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:y,className:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600 mb-1",children:"\u062d\u0641\u0638"}),(0,Lt.jsx)("button",{onClick:x,className:"bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600 mb-1",children:"\u0625\u0644\u063a\u0627\u0621"})]}):(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:()=>(e=>{o(e.id),i({username:e.username,password:"",role:e.role})})(t),className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mb-1",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Lt.jsx)("button",{onClick:()=>(e=>{h(d(d({},e),{},{tempPermissions:[...e.permissions||[]]}))})(t),className:"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600 mb-1",children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}),(0,Lt.jsx)("button",{onClick:()=>(async t=>{const n=prompt("\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629:");if(n&&n.trim())try{const r=e.find((e=>e.id===t));if(!r)return void alert("\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const a={id:r.id,username:r.username,password:n.trim(),role:r.role,permissions:r.permissions||[],created_at:r.created_at};await Rt.put("".concat(Ft,"/users/").concat(t),a),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0646\u062c\u0627\u062d")}catch(l){var r,a;console.error("Error updating password:",l),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631: "+((null===(r=l.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||l.message))}})(t.id),className:"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600 mb-1",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),"1"!==t.id&&"2"!==t.id&&(0,Lt.jsx)("button",{onClick:()=>(async e=>{if("1"!==e&&"2"!==e){if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u061f"))try{await Rt.delete("".concat(Ft,"/users/").concat(e)),g(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error deleting user:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}}else alert("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u064a\u0646")})(t.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 mb-1",children:"\u062d\u0630\u0641"})]})})})]},t.id)}))})]})})]}),f&&(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Lt.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: ",f.username]}),(0,Lt.jsx)("div",{className:"space-y-2 mb-4",children:b.map((e=>(0,Lt.jsxs)("label",{className:"flex items-center",children:[(0,Lt.jsx)("input",{type:"checkbox",checked:f.tempPermissions.includes(e.key),onChange:()=>{return t=e.key,void h((e=>{const n=e.tempPermissions.includes(t)?e.tempPermissions.filter((e=>e!==t)):[...e.tempPermissions,t];return d(d({},e),{},{tempPermissions:n})}));var t},className:"ml-2"}),(0,Lt.jsx)("span",{children:e.label})]},e.key)))}),(0,Lt.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,Lt.jsx)("button",{onClick:async()=>{try{const e={id:f.id,username:f.username,password:f.password,role:f.role,permissions:f.tempPermissions,created_at:f.created_at};await Rt.put("".concat(Ft,"/users/").concat(f.id),e),g(),h(null),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0628\u0646\u062c\u0627\u062d")}catch(n){var e,t;console.error("Error updating permissions:",n),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"\u062d\u0641\u0638"}),(0,Lt.jsx)("button",{onClick:()=>h(null),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},Jt=()=>{const[e,t]=(0,a.useState)("sales"),{user:n}=At();if(!n)return(0,Lt.jsx)(Mt,{});return(0,Lt.jsxs)("div",{className:"flex h-screen bg-gray-50",dir:"rtl",children:[(0,Lt.jsx)(Ut,{currentPage:e,onPageChange:t}),(0,Lt.jsx)("main",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-blue-50",children:(0,Lt.jsx)("div",{className:"p-6",children:(()=>{switch(e){case"dashboard":return"Elsawy"===(null===n||void 0===n?void 0:n.username)?(0,Lt.jsx)(qt,{}):(0,Lt.jsx)(Ht,{});case"sales":default:return(0,Lt.jsx)(Ht,{});case"inventory":return(0,Lt.jsx)(It,{});case"stock":return(0,Lt.jsx)(Vt,{});case"local":return(0,Lt.jsx)(Bt,{});case"deferred":return(0,Lt.jsx)(Wt,{});case"expenses":return(0,Lt.jsx)($t,{});case"revenue":return(0,Lt.jsx)(Qt,{});case"treasury":return(0,Lt.jsx)(Xt,{});case"invoices":return(0,Lt.jsx)(Kt,{});case"work-orders":return(0,Lt.jsx)(Gt,{});case"users":return(0,Lt.jsx)(Yt,{})}})()})})]})},Zt=()=>(0,Lt.jsx)(Dt,{children:(0,Lt.jsx)(Jt,{})});l.createRoot(document.getElementById("root")).render((0,Lt.jsx)(a.StrictMode,{children:(0,Lt.jsx)(Zt,{})}))})();
//# sourceMappingURL=main.7c80f030.js.map